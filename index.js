(()=>{"use strict";class e{static getPage(){return document.querySelector(".page")}static clearPage(){e.getPage().innerHTML=""}static hideScrollbar(){document.firstElementChild&&(document.firstElementChild.style.overflowY="hidden")}static showScrollbar(){document.firstElementChild&&(document.firstElementChild.style.overflowY="scroll")}}const t=e;var a,n,s,r,l,o,i,c,u,d,p,m,g,h,v,f,b,w,y,L,E,T,S,x,C,k,B;!function(e){e.div="div",e.link="a",e.btn="button",e.img="img",e.par="p",e.span="span",e.nav="nav",e.input="input",e.h1="h1",e.h2="h2",e.h3="h3",e.h4="h4",e.h5="h5",e.main="main",e.header="header",e.footer="footer",e.section="section",e.label="label",e.list="ul",e.listItem="li",e.audio="audio"}(a||(a={})),function(e){e.text="text",e.password="password"}(n||(n={})),function(e){e.home="home",e.layout="layout",e.lessons="lessons",e.lesson="lesson",e.test="test",e.games="games",e.gameOne="gameOne",e.gameTwo="gameTwo",e.about="about"}(s||(s={})),function(e){e.ru="ru",e.en="en"}(r||(r={})),function(e){e.light="light",e.dark="dark"}(l||(l={})),function(e){e.users="/users",e.lessons="/lessons",e.tests="/tests",e.test="/test"}(o||(o={})),function(e){e.get="get",e.post="post",e.put="put",e.delete="delete"}(i||(i={})),function(e){e.easy="basic",e.medium="intermediate",e.hard="advanced"}(c||(c={})),function(e){e.ru="ru",e.en="en"}(u||(u={})),function(e){e.one="gameOne",e.two="gameTwo"}(d||(d={})),function(e){e.noLogin="noLogin",e.noPassword="noPassword",e.invalidLogin="invalidLogin",e.invalidPassword="invalidPassword",e.existingLogin="existingLogin",e.notRegistered="notRegistered",e.notMatchingPassword="notMatchingPassword"}(p||(p={})),function(e){e.registration="registration",e.authorisation="authorisation"}(m||(m={})),function(e){e[e.min=2]="min",e[e.max=20]="max"}(g||(g={})),function(e){e[e.min=6]="min",e[e.max=20]="max"}(h||(h={})),function(e){e[e.found=200]="found",e[e.notFound=404]="notFound"}(v||(v={})),function(e){e[e.default=1]="default",e[e.amount=12]="amount"}(f||(f={})),function(e){e.true="disabled"}(b||(b={})),function(e){e.noData="noData"}(w||(w={})),function(e){e.view="view",e.edit="edit"}(y||(y={})),function(e){e.logout="logout",e.delete="delete"}(L||(L={})),function(e){e[e.one=1]="one",e[e.two=2]="two",e[e.three=3]="three",e[e.four=4]="four",e[e.five=5]="five",e[e.six=6]="six",e[e.seven=7]="seven",e[e.eight=8]="eight",e[e.nine=9]="nine",e[e.ten=10]="ten",e[e.eleven=11]="eleven",e[e.twelve=12]="twelve",e[e.thirteen=13]="thirteen",e[e.fourteen=14]="fourteen",e[e.fifteen=15]="fifteen",e[e.sixteen=16]="sixteen",e[e.seventeen=17]="seventeen",e[e.eighteen=18]="eighteen",e[e.nineteen=19]="nineteen",e[e.twenty=20]="twenty"}(E||(E={})),function(e){e.default="bg-default",e.one="bg-one",e.two="bg-two"}(T||(T={})),function(e){e.normal="font-size-normal",e.small="font-size-small",e.big="font-size-big"}(S||(S={})),function(e){e.default="font-family-sans-serif",e.serif="font-family-serif"}(x||(x={})),function(e){e[e.normal=40]="normal",e[e.small=30]="small",e[e.big=60]="big"}(C||(C={})),function(e){e.soft="sound-soft",e.hard="sound-hard",e.mech="sound-mechanical",e.silent="sound-silent"}(k||(k={})),function(e){e.default="skin-default",e.one="skin-one",e.two="skin-two",e.three="skin-three"}(B||(B={}));class M{}M.notAuthorised="0login",M.defaultAvatar=f.default,M.currentUser={login:M.notAuthorised,avatar:M.defaultAvatar},M.currentPage=s.home,M.currentLang=r.en,M.currentTheme=l.light,M.currentLessonBg=T.default,M.currentLessonFontSize=S.normal,M.currentLessonFontFamily=x.default,M.currentLessonSound=k.silent,M.currentLessonSkin=B.default;const I=M,A=class{static setItem(e,t){window.localStorage.setItem(e,JSON.stringify(t))}static getItem(e){return null!==window.localStorage.getItem(e)?JSON.parse(window.localStorage.getItem(e)):null}static removeItem(e){window.localStorage.removeItem(e)}},P=class{static updateState(){const e=A.getItem("eyesUpState");e&&(I.currentUser=e.currentUser,I.currentPage=e.currentPage,I.currentLang=e.currentLang,I.currentTheme=e.currentTheme,I.currentLayout=e.currentLayout,I.currentComplexity=e.currentComplexity,I.currentLessonBg=e.currentLessonBg,I.currentLessonFontSize=e.currentLessonFontSize,I.currentLessonFontFamily=e.currentLessonFontFamily,I.currentLessonSound=e.currentLessonSound,I.currentLessonSkin=e.currentLessonSkin)}static saveState(){const e={currentUser:I.currentUser,currentPage:I.currentPage,currentLang:I.currentLang,currentTheme:I.currentTheme,currentLayout:I.currentLayout,currentComplexity:I.currentComplexity,currentLessonBg:I.currentLessonBg,currentLessonFontSize:I.currentLessonFontSize,currentLessonFontFamily:I.currentLessonFontFamily,currentLessonSound:I.currentLessonSound,currentLessonSkin:I.currentLessonSkin};A.setItem("eyesUpState",e)}};class R{static changeTheme(){I.currentTheme=I.currentTheme===l.light?l.dark:l.light}static swapTheme(){const e=t.getPage();I.currentTheme===l.light?(e.classList.remove(l.dark),e.classList.add(l.light)):(e.classList.remove(l.light),e.classList.add(l.dark))}static applyTheme(){R.changeTheme(),P.saveState(),R.swapTheme()}}const $=R,D=class{static createElement(e,t){const a=document.createElement(e);return t&&t.forEach((e=>a.setAttribute(e.name,e.value))),a}};class H{static changePage(e){I.currentPage=e}static applyPage(e,t){I.currentPage===e&&I.currentPage!==s.lessons&&I.currentPage!==s.test&&I.currentPage!==s.lesson||(H.changePage(e),P.saveState(),t())}}const F=H,U=class{static createMenuBtn(e,t,n){const s=D.createElement(a.btn,[{name:"class",value:"menu-btn"}]);return I.currentPage===t&&s.classList.add("menu-btn-active"),s.textContent=e,s.addEventListener("click",(()=>{F.applyPage(t,n)})),s}},W={homeLink:{en:"Home",ru:"Главная"},lessonsLink:{en:"Lessons",ru:"Уроки"},gamesLink:{en:"Games",ru:"Игры"},gameOneTitle:{en:"Typing Adventure",ru:"Typing Adventure"},gameOneDescFirst:{en:"Do you want to feel yoursels like a real seeker of adventures? Welcome to Typing Adventure!",ru:"Хотите почувствовать себя настоящим искателем приключений? Добро пожаловать в Typing Adventure!"},gameOneDescSecond:{en:"Here fights with various monsters are waiting for you and the victory over them depends only on how quickly and accurately you will type spells. With each level not only your skills will grow, but also the strength of the monsters - so do not forget to combine attacks to cause more damage.",ru:"Здесь вас ждут схватки с разнообразными монстрами, а победа или поражение зависит от того, насколько быстро и точно вы будете печатать заклинания. С каждым уровнем будут расти не только ваши навыки, но и сила монстров - поэтому не забывайте комбинировать атаки, чтобы наносить больше урона."},gameOneDescThird:{en:"Well, are you ready? Then go ahead, towards adventures!",ru:"Ну что, готовы? Тогда вперед, навстречу приключениям!"},gameTwoTitle:{en:"Typing Hero",ru:"Typing Hero"},gameTwoDescFirst:{en:"Text",ru:"Описание"},gameTwoDescSecond:{en:"Text",ru:"Описание"},gameTwoDescThird:{en:"Text",ru:"Описание"},aboutUsLink:{en:"About Us",ru:"О нас"},themeSwitcher:{en:"En",ru:"Ру"},headerSignUpBtn:{en:"Sign Up",ru:"Войти"},promoTitle:{en:"Typing Lessons",ru:"Уроки печати"},promoText:{en:"Always wanted to type without looking at the keyboard? Learn with us quickly and efficiently!",ru:"Давно мечтали печатать, не глядя на клавиатуру? Научитесь вместе с нами быстро и эффективно!"},promoBtn:{en:"Get Started",ru:"Продолжить"},homeLessonsTitle:{en:"Interactive Experience",ru:"Интерактивное взаимодействие"},homeLessonsText:{en:"The student experience is clean, straightforward, engaging and fun. Our gamified environment motivates students to master each lesson before proceeding to the next level",ru:"Процесс обучения простой и увлекательный. Наш игровой подход мотивирует закреплять умения по каждому уроку, прежде чем перейти к следующему"},homeGamesTitle:{en:"Unique Typing Games",ru:"Уникальные игры"},homeGamesText:{en:"EyesUP's games are unique, engaging and challenging. Each of the games focuses on building specific typing skills. You can track your progress the same as you would with any other lesson",ru:"Игры EyesUP уникальны и интересны. Каждая из игр направлена на развитие определенных навыков набора текста. Вы сможете отслеживать свой прогресс, как при любом другом уроке"},homeProgressTitle:{en:"Badges and Statistics",ru:"Значки и статистика"},homeProgressText:{en:"Badges are designed to motivate students on key objectives. Statistics allows students to track the development of their typing skills",ru:"Значки увеличивают мотивацию, a статистика позволяет отследить развитие ваших навыков набора текста"},homeRegistrationTitle:{en:"Explore all possibilities",ru:"Исследуйте все возможности"},homeRegistrationText:{en:"Create an account to track your progress and store badges",ru:"Создайте учетную запись, чтобы отслеживать свои успехи и хранить значки"},homeRegistrationBtn:{en:"Sign Up",ru:"Создать аккаунт"},lessonsTitle:{en:"Lessons",ru:"Уроки"},lessonsEnLayoutTitle:{en:"English Layout",ru:"Английская раскладка"},lessonsRuLayoutTitle:{en:"Russian Layout",ru:"Русская раскладка"},lessonsTestTitle:{en:"Test your typing Speed and Accuracy",ru:"Проверьте свою скорость и точность печати"},lessonsTestBtn:{en:"Let's Go!",ru:"Поехали!"},lessonsFilterAll:{en:"All",ru:"Все"},lessonsFilterBasic:{en:"Basic",ru:"Простые"},lessonsFilterIntermediate:{en:"Intermediate",ru:"Средние"},lessonsFilterAdvanced:{en:"Advanced",ru:"Продвинутые"},gamesTitle:{en:"Games",ru:"Игры"},modalSignUpTitle:{en:"Sign Up",ru:"Регистрация"},modalLogInTitle:{en:"Log In",ru:"Авторизация"},modalSignUpLoginInput:{en:"Login",ru:"Логин"},modalSignUpPasswordInput:{en:"Password",ru:"Пароль"},modalLogInBtn:{en:"Log In",ru:"Войти"},modalSignUpBtn:{en:"Sign Up",ru:"Создать аккаунт"},modalLogInText:{en:"Don't have an account?",ru:"Еще нет аккаунта?"},modalSignUpText:{en:"Already have an account?",ru:"Уже есть аккаунт?"},modalLogInLink:{en:"Sign Up",ru:"Создать аккаунт"},modalSignUpLink:{en:"Log In",ru:"Войти"},profileTitle:{en:"Profile",ru:"Профиль"},profileEditTitle:{en:"Edit Profile",ru:"Редактирование"},profileUsernameInput:{en:"Username",ru:"Ник"},profileUsernamePassword:{en:"Password",ru:"Пароль"},statsTitle:{en:"Statistics",ru:"Статистика"},statsLessonsCompleted:{en:"Completed lessons",ru:"Завершено уроков"},statsLessonsSpeed:{en:"Average Speed",ru:"Средняя скорость"},statsLessonsAccuracy:{en:"Accuracy",ru:"Точность"},profileBadgesTitle:{en:"Earned Badges",ru:"Полученные значки"},profileBadgesLink:{en:"All badges",ru:"Все значки"},profileLogoutBtn:{en:"Logout",ru:"Выйти"},profileSaveBtn:{en:"Save Changes",ru:"Сохранить"},profileAvatarsTitle:{en:"Avatars",ru:"Аватарки"},profileDeleteBtn:{en:"Delete Account",ru:"Удалить аккаунт"},backBtn:{en:"Back",ru:"Назад"},testRibbonText:{en:"Start typing",ru:"Начните печатать"},testMistakesText:{en:"Mistakes:",ru:"Ошибки:"},testWpmText:{en:"Speed:",ru:"Скорость:"},testWpmSub:{en:"wpm",ru:"свм"},testAccuracyText:{en:"Accuracy:",ru:"Точность:"},testCorrectionsText:{en:"Corrections:",ru:"Исправления:"},testBtnsText:{en:"Text language",ru:"Язык текста"},testResultText:{en:"Result",ru:"Результат"},lessonResults0:{en:"Продолжайте практиковаться!",ru:"Что ж, попробуйте еще раз!"},lessonResults1:{en:"Keep practicing!",ru:"Продолжайте практиковаться!"},lessonResults2:{en:"Keep practicing!",ru:"Продолжайте практиковаться!"},lessonResults3:{en:"Good job!",ru:"Хорошая работа!"},lessonResults4:{en:"Well done!",ru:"Отличная работа!"},lessonResults5:{en:"Excellent job!",ru:"Отличная работа!"},lessonResultsScoreText:{en:"Your score",ru:"Ваш результат"},lessonResultsReq:{en:"Lesson requirements",ru:"Требования к уроку"},lessonResultsReqSpeed:{en:"Minimum speed",ru:"Минимальная скорость"},lessonResultsReqSpeedStar:{en:"Speed for a star",ru:"Скорость для звезды"},lessonResultsReqAccuracy:{en:"Minimum accuracy",ru:"Минимальная точность"},lessonBadgeTitle:{en:"New achivment",ru:"Новое достижение"},lessonBadgeCompletedAllLessons:{en:"You've completed all lessons!",ru:"Вы завершили все уроки!"},lessonBadgeEyesUp:{en:"You've completed all EyesUp lessons!",ru:"Вы завершили все уроки EyesUp!"},lessonBadgeSpeed20:{en:"You've reached a typing speed of 20wpm!",ru:"Вы достигли скорости печати 20 слов в минуту!"},lessonBadgeSpeed60:{en:"You've reached a typing speed of 60wpm!",ru:"Вы достигли скорости печати 60 слов в минуту!"},lessonBadgeSpeed100:{en:"You've reached a typing speed of 100wpm!",ru:"Вы достигли скорости печати 100 слов в минуту!"},lessonSoundSilent:{en:"Silent",ru:"Без звука"},lessonSoundSoft:{en:"Soft Laptop",ru:"Мягкий звук"},lessonSoundHard:{en:"Hard Laptop",ru:"Громкий звук"},lessonSoundMech:{en:"Mechanical",ru:"Механический"}},O=class{static createMenu(e,t){const n=D.createElement(a.nav,[{name:"class",value:e}]),r=U.createMenuBtn(W.homeLink[I.currentLang],s.home,t),l=U.createMenuBtn(W.lessonsLink[I.currentLang],s.layout,t),o=U.createMenuBtn(W.gamesLink[I.currentLang],s.games,t),i=U.createMenuBtn(W.aboutUsLink[I.currentLang],s.about,t);return n.append(r,l,o,i),n}},N=class{static createSmallBtn(e,t){const n=D.createElement(a.btn,[{name:"class",value:e}]);return t&&(n.textContent=t),n}};class G{static changeLang(){I.currentLang=I.currentLang===r.en?r.ru:r.en}static applyLang(e){G.changeLang(),P.saveState(),e()}}const z=G,j=class{static openModal(e){const n=t.getPage();t.hideScrollbar(),n.style.paddingRight=`${class{static countScrollbarWidth(){const e=D.createElement(a.div,[{name:"class",value:"measure-scrollbar"}]);document.body.append(e);const t=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),t}}.countScrollbarWidth()}px`,n.append(e)}static closeModal(e){const a=t.getPage();t.showScrollbar(),a.style.paddingRight="0",e.remove()}static changeModal(e,t,a){t.remove(),e.append(a)}static switchModal(e){e.classList.add("hidden"),e.previousElementSibling&&e.previousElementSibling.classList.remove("hidden"),e.nextElementSibling&&e.nextElementSibling.classList.remove("hidden")}static clearModalContent(e){e.children&&Array.from(e.children).forEach((t=>{e.removeChild(t)}))}},q=class{static createCloseBtn(e,t){const a=N.createSmallBtn(e);return a.textContent="Close button",a.addEventListener("click",(()=>{j.closeModal(t)})),a}},V=class{static checkIfUserAuthorised(){return I.currentUser.login!==I.notAuthorised}static updateUserLogin(e){I.currentUser.login=e}static updateUserState(e,t){I.currentUser.login=e,I.currentUser.avatar=t}static resetUserState(){I.currentUser.login=I.notAuthorised,I.currentUser.avatar=I.defaultAvatar}};class Y{static createAvatarImagePath(e){return`${Y.path}avatar-${e}.png`}static createAvatarImage(e,t){const n=D.createElement(a.img,[{name:"class",value:e}]);return n.setAttribute("src",t),n.setAttribute("alt","Avatar image"),n}}Y.path="./assets/images/avatars/";const K=Y,_=class{static createModalWrapper(e,t){const n=D.createElement(a.div,[{name:"class",value:"modal-wrapper"}]),s=class{static createOverlay(e){const t=D.createElement(a.div,[{name:"class",value:"overlay"}]);return t.addEventListener("click",(()=>{j.closeModal(e)})),t}}.createOverlay(n),r=e(n,t);return n.append(s,r),n}},J=class{static createMainTitle(e){const t=D.createElement(a.h3,[{name:"class",value:"main-title"}]);return t.textContent=e,t}},Q=class{static createInputLabel(e,t){const n=D.createElement(a.label,[{name:"class",value:e}]);return n.textContent=t,n}},Z=class{static createInput(e,t){const a=document.createElement(e);return t&&t.forEach((e=>a.setAttribute(e.name,e.value))),a}},X=class{static createLoginInput(e,t){const n=Z.createInput(a.input,[{name:"class",value:e}]);return t&&n.setAttribute(t,t),n}},ee=class{static createPasswordInput(e,t){const s=Z.createInput(a.input,[{name:"class",value:e},{name:"type",value:n.password}]);return t&&s.setAttribute(t,t),s}},te=class{static switchPasswordVisibility(e,t){t.getAttribute("type")===n.password?(e.classList.add("password-open"),e.classList.remove("password-close"),t.setAttribute("type",n.text)):(e.classList.add("password-close"),e.classList.remove("password-open"),t.setAttribute("type",n.password))}static hidePassword(e){e.lastElementChild&&e.lastElementChild.lastElementChild&&e.lastElementChild.lastElementChild.previousElementSibling&&e.lastElementChild.lastElementChild.previousElementSibling.getAttribute("type")===n.text&&(e.lastElementChild.lastElementChild.classList.add("password-close"),e.lastElementChild.lastElementChild.classList.remove("password-open"),e.lastElementChild.lastElementChild.previousElementSibling.setAttribute("type",n.password))}},ae=class{static createPasswordVisibilityBtn(e,t){const n=D.createElement(a.btn,[{name:"class",value:e}]);return n.addEventListener("click",(()=>{te.switchPasswordVisibility(n,t)})),n}},ne={noLogin:{en:"Please enter login.",ru:"Пожалуйста, введите логин."},noPassword:{en:"Please enter password.",ru:"Пожалуйста, введите пароль."},invalidLogin:{en:"Invalid login. Hover over the icon to see more details.",ru:"Неверный логин. Коснитесь иконки, чтобы узнать детали."},invalidPassword:{en:"Invalid password. Hover over the icon to see more details.",ru:"Неверный пароль. Коснитесь иконки, чтобы узнать детали."},existingLogin:{en:"There is a user with such login already.",ru:"Пользователь с таким логином уже существует."},notRegistered:{en:"There is no user with such login. Please register first.",ru:"Пользователя с таким логином не существует. Пожалуйста, сначала зарегистрируйтесь."},notMatchingPassword:{en:"Password doesn't match.",ru:"Пароль не подходит."},loginHint:{en:"2-20 characters, latin / cyrillic letters, numbers, should start from letter.",ru:"2-20 символов, буквы латиницы / кириллицы, числа, должен начинаться с буквы."},passwordHint:{en:"6-20 characters, 1 number, 1 latin capital letter, 1 latin lowercase letter, 1 special character (!@#$%^&*).",ru:"6-20 символов, 1 число, 1 заглавная латинская буква, 1 прописная латинская буква, 1 спецсимвол (!@#$%^&*)."}},se=class{static showHint(e){e.lastElementChild&&e.lastElementChild.classList.remove("hidden")}static hideHint(e){e.lastElementChild&&e.lastElementChild.classList.add("hidden")}},re=class{static createErrorHintContent(e,t){const n=D.createElement(a.par,[{name:"class",value:"error-hint-content"}]),s=D.createElement(a.span,[{name:"class",value:"error-hint-mark"}]),r=D.createElement(a.span,[{name:"class",value:"error-hint-text"}]);return s.textContent=`${e}: `,r.textContent=t,n.append(s,r),n}};class le{static wipeError(e){e.firstChild&&e.removeChild(e.firstChild)}static showError(e,t,n){le.wipeError(e),e.append(class{static createErrorContent(e,t){const n=D.createElement(a.par,[{name:"class",value:"error-content"}]),s=class{static createErrorText(e){const t=D.createElement(a.span,[{name:"class",value:"error-text"}]);return t.textContent=ne[e][I.currentLang],t}}.createErrorText(t);if(n.append(s),e===m.registration){const e=class{static createErrorIcon(e){const t=D.createElement(a.span,[{name:"class",value:"error-icon"}]);return t.textContent="Error hint",t.addEventListener("mouseenter",(()=>{se.showHint(e)})),t.addEventListener("mouseleave",(()=>{se.hideHint(e)})),t}}.createErrorIcon(n),t=class{static createErrorHint(){const e=D.createElement(a.div,[{name:"class",value:"error-hint hidden"}]),t=re.createErrorHintContent(W.modalSignUpLoginInput[I.currentLang],ne.loginHint[I.currentLang]),n=re.createErrorHintContent(W.modalSignUpPasswordInput[I.currentLang],ne.passwordHint[I.currentLang]);return e.append(t,n),e}}.createErrorHint();n.append(e,t)}return n}}.createErrorContent(t,n))}}const oe=le,ie=class{static createPasswordRegExp(e,t,a){const n=`{${t},${a}}`,s=[...Object.values(e)],r=`${s.map((e=>`(?=.*[${e}])`)).join("")}[${s.join("")}]${n}`;return new RegExp(r,"g")}static createLoginRegExp(e,t,a){const n=`{${t-1},${a-1}}`,s=[...Object.values(e)],r=`^[${e.latin}${e.cyrillic}]+[${s.join("")}]${n}`;return new RegExp(r,"ig")}};class ce{}ce.login=I.notAuthorised,ce.password=I.notAuthorised,ce.avatar=I.defaultAvatar;const ue=ce,de={numeric:"0-9",special:"!@#$%^&*",latinLower:"a-z",latinUpper:"A-Z"},pe={numeric:"0-9",latin:"a-z",cyrillic:"а-яё"};class me{static checkIfValueNotEmpty(e){return!!e}static checkIfLoginValid(e){return ie.createLoginRegExp(pe,g.min,g.max).test(e)}static checkIfPasswordValid(e){return ie.createPasswordRegExp(de,h.min,h.max).test(e)}static checkIfLoginCorrect(e,t){return me.checkIfValueNotEmpty(e)?!!me.checkIfLoginValid(e)||(oe.showError(t,m.registration,p.invalidLogin),!1):(oe.showError(t,m.registration,p.noLogin),!1)}static checkIfPasswordCorrect(e,t){return me.checkIfValueNotEmpty(e)?!!me.checkIfPasswordValid(e)||(oe.showError(t,m.registration,p.invalidPassword),!1):(oe.showError(t,m.registration,p.noPassword),!1)}static checkIfDataCorrect(e,t,a){const n=me.checkIfPasswordCorrect(t,a),s=me.checkIfLoginCorrect(e,a);return!(!n||!s)}static checkIfDataEntered(e,t,a){return me.checkIfValueNotEmpty(e)?!!me.checkIfValueNotEmpty(t)||(oe.showError(a,m.authorisation,p.noPassword),!1):(oe.showError(a,m.authorisation,p.noLogin),!1)}static checkIfLoginDiffer(e){return ue.login!==e.login}static checkIfUserDataDiffer(e){return ue.login!==e.login||ue.password!==e.password||ue.avatar!==e.avatar}}const ge=me;class he{static disableSaveChangesBtn(e){e.setAttribute(b.true,b.true)}static enableSaveChangesBtn(e){e.removeAttribute(b.true)}static switchSaveChangesBtnState(e,t){ge.checkIfUserDataDiffer(e)?he.enableSaveChangesBtn(t):he.disableSaveChangesBtn(t)}}const ve=he,fe=class{static updateProfileState(e){ue.login=e.login,ue.password=e.password,ue.avatar=e.avatar}static changeLoginState(e){ue.login=e}static changePasswordState(e){ue.password=e}static changeAvatarState(e){ue.avatar=e}},be=class{static createViewProfileData(e,t,n){const s=D.createElement(a.div,[{name:"class",value:"profile-data-wrapper"}]),r=class{static createProfileAvatar(e){const t=D.createElement(a.div,[{name:"class",value:"profile-avatar-wrapper"}]),n=K.createAvatarImage("default-avatar profile-avatar-image selected-avatar",K.createAvatarImagePath(e));return t.append(n),t}}.createProfileAvatar(e.avatar),l=Q.createInputLabel("profile-input-label profile-login-input-label",W.modalSignUpLoginInput[I.currentLang]),o=t===y.edit&&n?class{static createEditProfileLoginInput(e,t){const a=X.createLoginInput("profile-input");return a.addEventListener("input",(()=>{fe.changeLoginState(a.value.trim()),ve.switchSaveChangesBtnState(e,t)})),a}}.createEditProfileLoginInput(e,n):X.createLoginInput("profile-input",b.true),i=Q.createInputLabel("profile-input-label profile-password-input-label",W.modalSignUpPasswordInput[I.currentLang]),c=t===y.edit&&n?class{static createEditProfilePasswordInput(e,t){const a=ee.createPasswordInput("profile-input profile-password-input");return a.addEventListener("input",(()=>{fe.changePasswordState(a.value.trim()),ve.switchSaveChangesBtnState(e,t)})),a}}.createEditProfilePasswordInput(e,n):ee.createPasswordInput("profile-input profile-password-input",b.true),u=ae.createPasswordVisibilityBtn("password-visibility-btn profile-password-visibility-btn password-close",c);return o.value=e.login,c.value=e.password,l.append(o),i.append(c,u),s.append(r,l,i),s}},we=class{static createBigBtn(e){const t=D.createElement(a.btn,[{name:"class",value:"big-btn"}]);return t.textContent=e,t}};var ye=function(e,t,a,n){return new(a||(a=Promise))((function(s,r){function l(e){try{i(n.next(e))}catch(e){r(e)}}function o(e){try{i(n.throw(e))}catch(e){r(e)}}function i(e){var t;e.done?s(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(l,o)}i((n=n.apply(e,t||[])).next())}))};class Le{static getLessonsQuery(e){return e.layout&&e.complexity?`layout=${e.layout}&complexity=${e.complexity}`:`layout=${e.layout}`}static getUsers(){return ye(this,void 0,void 0,(function*(){const e=yield fetch(`${Le.url}${o.users}`);return yield e.json()}))}static checkUser(e){return ye(this,void 0,void 0,(function*(){const t=yield fetch(`${Le.url}${o.users}/${e}`);return yield t.status}))}static getUser(e){return ye(this,void 0,void 0,(function*(){const t=yield fetch(`${Le.url}${o.users}/${e}`);return yield t.json()}))}static createUser(e){return ye(this,void 0,void 0,(function*(){const t=yield fetch(`${Le.url}${o.users}`,{method:i.post,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return yield t.json()}))}static updateUser(e,t){return ye(this,void 0,void 0,(function*(){const a=yield fetch(`${Le.url}${o.users}/${e}`,{method:i.put,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return yield a.json()}))}static deleteUser(e){return ye(this,void 0,void 0,(function*(){const t=yield fetch(`${Le.url}${o.users}/${e}`,{method:i.delete});return yield t.json()}))}static getLessons(e){return ye(this,void 0,void 0,(function*(){const t=yield fetch(`${Le.url}${o.lessons}?${Le.getLessonsQuery(e)}`);return yield t.json()}))}static createLesson(e){return ye(this,void 0,void 0,(function*(){const t=yield fetch(`${Le.url}${o.lessons}`,{method:i.post,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return yield t.json()}))}static getLesson(e){return ye(this,void 0,void 0,(function*(){const t=yield fetch(`${Le.url}${o.lessons}/${e}`);return yield t.json()}))}static updateLesson(e,t){return ye(this,void 0,void 0,(function*(){const a=yield fetch(`${Le.url}${o.lessons}/${e}`,{method:i.put,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return yield a.json()}))}static deleteLesson(e){return ye(this,void 0,void 0,(function*(){const t=yield fetch(`${Le.url}${o.lessons}/${e}`,{method:i.delete});return yield t.json()}))}static getTests(){return ye(this,void 0,void 0,(function*(){const e=yield fetch(`${Le.url}${o.tests}`);return yield e.json()}))}static getTest(e){return ye(this,void 0,void 0,(function*(){const t=yield fetch(`${Le.url}${o.test}?language=${e}`);return yield t.json()}))}static createTest(e){return ye(this,void 0,void 0,(function*(){const t=yield fetch(`${Le.url}${o.tests}`,{method:i.post,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return yield t.json()}))}static updateTest(e,t){return ye(this,void 0,void 0,(function*(){const a=yield fetch(`${Le.url}${o.tests}/${e}`,{method:i.put,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return yield a.json()}))}static deleteTest(e){return ye(this,void 0,void 0,(function*(){const t=yield fetch(`${Le.url}${o.tests}/${e}`,{method:i.delete});return yield t.json()}))}}Le.url="https://eyesup-backend.herokuapp.com/api/v1";const Ee=Le,Te=class{constructor(e,t,a,n,s,r,l,o,i){this.login=e,this.password=t,this.avatar=a,this.testing=n,this.lessonsEn=s,this.lessonsRu=r,this.typingAdventure=l,this.typingHero=o,this.badges=i,this.login=e,this.password=t,this.avatar=a,this.testing=n,this.lessonsEn=s,this.lessonsRu=r,this.typingAdventure=l,this.typingHero=o,this.badges=i}},Se=class extends Te{constructor(e,t,a){super(e,t,a,w.noData,w.noData,w.noData,w.noData,w.noData,w.noData),this.login=e,this.password=t,this.avatar=a}},xe=class{static createUser(e,t,a,n){const s=e.value.trim(),r=t.value.trim();ge.checkIfDataCorrect(s,r,a)&&Ee.checkUser(s).then((e=>{if(e===v.found&&oe.showError(a,m.registration,p.existingLogin),e===v.notFound){const e=new Se(s,r,I.currentUser.avatar);Ee.createUser(e).then((()=>{V.updateUserLogin(s),P.saveState(),n()}))}}))}static authoriseUser(e,t,a,n){const s=e.value.trim(),r=t.value.trim();ge.checkIfDataEntered(s,r,a)&&Ee.checkUser(s).then((e=>{e===v.notFound&&oe.showError(a,m.authorisation,p.notRegistered),e===v.found&&Ee.getUser(s).then((e=>{r!==e.password?oe.showError(a,m.authorisation,p.notMatchingPassword):(V.updateUserState(s,e.avatar),P.saveState(),n())}))}))}static logoutFromProfile(e){V.resetUserState(),P.saveState(),e()}static changeUserData(e,t,a){const n=ge.checkIfDataCorrect(ue.login,ue.password,t),s=ge.checkIfLoginDiffer(e),r=new Te(ue.login,ue.password,ue.avatar,e.testing,e.lessonsEn,e.lessonsRu,e.typingAdventure,e.typingHero,e.badges);n&&(s?Ee.checkUser(ue.login).then((n=>{n===v.found&&oe.showError(t,m.registration,p.existingLogin),n===v.notFound&&Ee.updateUser(e._id,r).then((()=>{V.updateUserState(ue.login,ue.avatar),P.saveState(),a()}))})):Ee.updateUser(e._id,r).then((()=>{V.updateUserState(ue.login,ue.avatar),P.saveState(),a()})))}},Ce=class{static changeAvatarImage(e){if(e.firstElementChild&&e.firstElementChild.firstElementChild){const t=K.createAvatarImage("default-avatar profile-avatar-image selected-avatar",K.createAvatarImagePath(ue.avatar));e.firstElementChild.removeChild(e.firstElementChild.firstElementChild),e.firstElementChild.append(t)}}static changeSelectedAvatar(e,t){Array.from(e.children).forEach((e=>{e.firstElementChild&&e.firstElementChild.classList.contains("selected-avatar")&&(e.firstElementChild.classList.remove("selected-avatar"),e.firstElementChild.classList.add("not-selected-avatar"))})),t.firstElementChild&&(t.firstElementChild.classList.remove("not-selected-avatar"),t.firstElementChild.classList.add("selected-avatar"))}},ke=class{static createAvatarBtn(e,t,n,s,r){const l=D.createElement(a.btn,[{name:"class",value:"avatar-btn"}]),o=t===ue.avatar?"avatar-btn-img default-avatar selected-avatar":"avatar-btn-img default-avatar not-selected-avatar",i=K.createAvatarImage(o,K.createAvatarImagePath(t));return l.append(i),l.addEventListener("click",(()=>{fe.changeAvatarState(t),Ce.changeAvatarImage(s),Ce.changeSelectedAvatar(e,l),ve.switchSaveChangesBtnState(n,r)})),l}},Be=class{static showConfirmation(e){e.firstElementChild&&e.firstElementChild.classList.remove("hidden")}static hideConfirmation(e){e.firstElementChild&&e.firstElementChild.classList.add("hidden")}},Me=class{static createSubtitle(e,t){const n=D.createElement(a.h4,[{name:"class",value:e}]);return n.textContent=t,n}},Ie={btnYes:{en:"Yes",ru:"Да"},btnNo:{en:"No",ru:"Нет"},question:{en:"Are you sure?",ru:"Вы уверены?"},textLogout:{en:"Your future progress won't be saved.",ru:"Ваш будущий прогресс не будет сохранен."},textDelete:{en:"All your progress will be lost.",ru:"Весь ваш прогресс будет утерян."}},Ae=class{static createConfirmationText(e){const t=D.createElement(a.par,[{name:"class",value:"confirmation-text"}]);return t.textContent=e,t}},Pe=class{static createConfirmationYesBtn(){const e=D.createElement(a.par,[{name:"class",value:"confirmation-yes-btn"}]);return e.textContent=Ie.btnYes[I.currentLang],e}},Re=class{static createConfirmationContent(e,t,n,s,r){const l=D.createElement(a.div,[{name:"class",value:t}]),o=class{static createConfirmationQuestion(){const e=D.createElement(a.par,[{name:"class",value:"confirmation-question"}]);return e.textContent=Ie.question[I.currentLang],e}}.createConfirmationQuestion(),i=s===L.delete?Ae.createConfirmationText(Ie.textDelete[I.currentLang]):Ae.createConfirmationText(Ie.textLogout[I.currentLang]),c=D.createElement(a.div,[{name:"class",value:"confirmation-btns-wrapper"}]),u=L.delete&&r?class{static createConfirmationDeleteAccountBtn(e,t){const a=Pe.createConfirmationYesBtn();return a.addEventListener("click",(()=>{Ee.deleteUser(e._id).then((()=>{xe.logoutFromProfile(t)}))})),a}}.createConfirmationDeleteAccountBtn(r,n):class{static createConfirmationLogoutBtn(e){const t=Pe.createConfirmationYesBtn();return t.addEventListener("click",(()=>{xe.logoutFromProfile(e)})),t}}.createConfirmationLogoutBtn(n),d=class{static createConfirmationNoBtn(e){const t=D.createElement(a.par,[{name:"class",value:"confirmation-no-btn"}]);return t.textContent=Ie.btnNo[I.currentLang],t.addEventListener("click",(()=>{Be.hideConfirmation(e)})),t}}.createConfirmationNoBtn(e);return c.append(u,d),l.append(o,i,c),l}},$e=class{static createProfileModal(e,t){const n=D.createElement(a.div,[{name:"class",value:"profile-modal"}]);return Ee.getUser(I.currentUser.login).then((s=>{const r=D.createElement(a.div,[{name:"class",value:"profile-modal-content hidden"}]),l=class{static createViewProfileModal(e,t,n,s){fe.updateProfileState(n);const r=D.createElement(a.div,[{name:"class",value:"profile-modal-content"}]),l=be.createViewProfileData(n,y.view),o=D.createElement(a.div,[{name:"class",value:"logout-confirmation-wrapper"}]),i=Re.createConfirmationContent(o,"logout-confirmation-content hidden",s,L.logout),c=class{static createLogoutBtn(e){const t=we.createBigBtn(W.profileLogoutBtn[I.currentLang]);return t.classList.add("logout-btn"),t.addEventListener("click",(()=>{Be.showConfirmation(e)})),t}}.createLogoutBtn(o),u=class{static createViewProfileHeader(e,t,n,s,r,l,o){const i=D.createElement(a.div,[{name:"class",value:"profile-header"}]),c=q.createCloseBtn("small-btn close-btn profile-btn",l),u=J.createMainTitle(W.profileTitle[I.currentLang]),d=class{static createEditProfileBtn(e,t,n,s,r,l){const o=D.createElement(a.btn,[{name:"class",value:"small-btn edit-btn profile-btn"}]);return o.textContent="Edit profile",o.addEventListener("click",(()=>{te.hidePassword(e),Be.hideConfirmation(t),class{static createEditProfileModal(e,t,n){fe.updateProfileState(t),j.clearModalContent(e);const s=class{static createEditProfileHeader(e){const t=D.createElement(a.div,[{name:"class",value:"profile-header"}]),n=class{static createCloseEditProfileBtn(e){const t=D.createElement(a.btn,[{name:"class",value:"small-btn close-btn profile-btn"}]);return t.addEventListener("click",(()=>{j.switchModal(e)})),t}}.createCloseEditProfileBtn(e),s=J.createMainTitle(W.profileEditTitle[I.currentLang]),r=D.createElement(a.div,[{name:"class",value:"edit-profile-plag"}]);return t.append(n,s,r),t}}.createEditProfileHeader(e),r=D.createElement(a.div,[{name:"class",value:"error-block profile-error-block"}]),l=class{static createSaveChangesBtn(e,t,a){const n=we.createBigBtn(W.profileSaveBtn[I.currentLang]);return n.classList.add("save-changes-btn"),n.setAttribute(b.true,b.true),n.addEventListener("click",(()=>{xe.changeUserData(e,t,a)})),n}}.createSaveChangesBtn(t,r,n),o=be.createViewProfileData(t,y.edit,l),i=Me.createSubtitle("subtitle profile-subtitle",W.profileAvatarsTitle[I.currentLang]),c=class{static createProfileAvatars(e,t,n){const s=D.createElement(a.div,[{name:"class",value:"profile-avatars-wrapper"}]);for(let a=f.default;a<=f.amount;a+=1){const r=ke.createAvatarBtn(s,a,e,t,n);s.append(r)}return s}}.createProfileAvatars(t,o,l),u=D.createElement(a.div,[{name:"class",value:"delete-account-confirmation-wrapper"}]),d=Re.createConfirmationContent(u,"delete-account-confirmation-content hidden",n,L.delete,t),p=class{static createDeleteAccountBtn(e){const t=D.createElement(a.btn,[{name:"class",value:"delete-account-btn"}]);return t.textContent=W.profileDeleteBtn[I.currentLang],t.addEventListener("click",(()=>{Be.showConfirmation(e)})),t}}.createDeleteAccountBtn(u);u.append(d,p),e.append(s,o,r,i,c,u,l)}}.createEditProfileModal(n,s,r),j.switchModal(l)})),o}}.createEditProfileBtn(e,t,n,s,r,o);return i.append(c,u,d),i}}.createViewProfileHeader(l,o,e,n,s,t,r);return o.append(i,c),r.append(u,l,o),r}}.createViewProfileModal(r,e,s,t);n.append(l,r)})),n}};class De{static createProfileBtn(e,t,n,s){const r=D.createElement(a.btn,[{name:"class",value:e}]),l=K.createAvatarImage(t,n),o=D.createElement(a.par,[{name:"class",value:s}]);return o.textContent=W.profileTitle[I.currentLang],r.append(l,o),r}static createHeaderProfileBtn(e){const t=De.createProfileBtn("header-profile-btn","default-avatar header-profile-avatar",K.createAvatarImagePath(I.currentUser.avatar),"header-profile-text");return t.addEventListener("click",(()=>{j.openModal(_.createModalWrapper($e.createProfileModal,e))})),t}static createBurgerMenuProfileBtn(e,t,a){const n=De.createProfileBtn("burger-menu-profile-btn","default-avatar burger-menu-profile-avatar selected-avatar",K.createAvatarImagePath(I.currentUser.avatar),"burger-menu-profile-text");return n.addEventListener("click",(()=>{j.changeModal(e,t,a)})),n}}const He=De,Fe=class{static createRegistrationModalContent(e,t,n,s,r,l){const o=D.createElement(a.div,[{name:"class",value:e}]),i=J.createMainTitle(t),c=class{static createRegistrationDataWrapper(e,t){const n=D.createElement(a.div),s=D.createElement(a.div,[{name:"class",value:"registration-inputs-wrapper"}]),r=Q.createInputLabel("registration-input-label base-text",W.modalSignUpLoginInput[I.currentLang]),l=X.createLoginInput("registration-input"),o=Q.createInputLabel("registration-input-label base-text",W.modalSignUpPasswordInput[I.currentLang]),i=ee.createPasswordInput("registration-input registration-password-input"),c=ae.createPasswordVisibilityBtn("password-visibility-btn registration-password-visibility-btn password-close",i),u=D.createElement(a.div,[{name:"class",value:"error-block registration-error-block"}]),d=e(l,i,u,t);return r.append(l),o.append(i,c),s.append(r,o,u),n.append(s,d),n}}.createRegistrationDataWrapper(r,l),u=class{static createRegistrationSwitchBtn(e,t,n){const s=D.createElement(a.btn,[{name:"class",value:"registration-switch-btn"}]),r=D.createElement(a.par,[{name:"class",value:"registration-switch-text"}]),l=D.createElement(a.par,[{name:"class",value:"registration-switch-action"}]);return r.textContent=e,l.textContent=t,s.append(r,l),s.addEventListener("click",(()=>{j.switchModal(n)})),s}}.createRegistrationSwitchBtn(n,s,o);return o.append(i,c,u),o}},Ue=class{static createRegistrationModal(e,t){const n=D.createElement(a.div,[{name:"class",value:"registration-modal"}]),s=q.createCloseBtn("small-btn close-btn registration-close-btn",e),r=Fe.createRegistrationModalContent("registration-modal-content",W.modalSignUpTitle[I.currentLang],W.modalSignUpText[I.currentLang],W.modalSignUpLink[I.currentLang],class{static createSignUpBtn(e,t,n,s){const r=D.createElement(a.btn,[{name:"class",value:"big-btn"}]);return r.textContent=W.modalSignUpTitle[I.currentLang],r.addEventListener("click",(()=>{xe.createUser(e,t,n,s)})),r}}.createSignUpBtn,t),l=Fe.createRegistrationModalContent("registration-modal-content hidden",W.modalLogInTitle[I.currentLang],W.modalLogInText[I.currentLang],W.modalLogInLink[I.currentLang],class{static createLogInBtn(e,t,n,s){const r=D.createElement(a.btn,[{name:"class",value:"big-btn"}]);return r.textContent=W.modalLogInTitle[I.currentLang],r.addEventListener("click",(()=>{xe.authoriseUser(e,t,n,s)})),r}}.createLogInBtn,t);return n.append(s,r,l),n}};class We{static createRegistrationBtn(){return N.createSmallBtn("small-btn small-btn-bg registration-btn",W.headerSignUpBtn[I.currentLang])}static createHeaderRegistrationBtn(e){const t=We.createRegistrationBtn();return t.addEventListener("click",(()=>{j.openModal(_.createModalWrapper(Ue.createRegistrationModal,e))})),t}static createBurgerMenuRegistrationBtn(e,t,a){const n=We.createRegistrationBtn();return n.addEventListener("click",(()=>{j.changeModal(e,t,a)})),n}}const Oe=We,Ne="https://rs.school/js",Ge="#",ze="https://www.typingclub.com",je="https://spectrumui.gumroad.com",qe="https://dribbble.com/alzea/shots",Ve={Oxana:{name:"Oxana",nickname:"oxanacode",gitHubLink:"https://github.com/oxanacode",avatar:"./assets/images/developers/oxana.svg"},Nikita:{name:"Nikita",nickname:"ReWired25",gitHubLink:"https://github.com/ReWired25",avatar:"./assets/images/developers/nikita.svg"},Irina:{name:"Irina",nickname:"IDemidova",gitHubLink:"https://github.com/IDemidova",avatar:"./assets/images/developers/irina.svg"}};class Ye{static createRssCopyWrapper(){const e=D.createElement(a.div,[{name:"class",value:"rsslink-copy-wrapper"}]),t=class{static CreateRssLink(){const e=D.createElement(a.link,[{name:"class",value:"rss-link"},{name:"href",value:Ne},{name:"target",value:"_blank"}]),t=D.createElement(a.par,[{name:"class",value:"rss-logo-text"}]);return t.textContent="RS logo",e.append(t),e}}.CreateRssLink(),n=class{static createCopy(){const e=D.createElement(a.par,[{name:"class",value:"copy"}]);return e.textContent="© 2022 EyesUP",e}}.createCopy();return e.append(t,n),e}static createGithubsWrapper(){const e=D.createElement(a.div,[{name:"class",value:"github-links-wrapper"}]);return e.append(...class{static createGithubLinks(){return[{link:Ve.Irina.gitHubLink,name:Ve.Irina.nickname},{link:Ve.Nikita.gitHubLink,name:Ve.Nikita.nickname},{link:Ve.Oxana.gitHubLink,name:Ve.Oxana.nickname}].map((e=>{const t=D.createElement(a.link,[{name:"class",value:"dev-link"},{name:"href",value:e.link},{name:"target",value:"_blank"}]);return t.textContent=e.name,t}))}}.createGithubLinks()),e}static createContentWrapper(){const e=D.createElement(a.div,[{name:"class",value:"footer-wrapper"}]),t=Ye.createRssCopyWrapper(),n=Ye.createGithubsWrapper();return e.append(t,n),e}}const Ke=Ye,_e=class{static createHomeSection(e,t,n){const s=D.createElement(a.section,[{name:"class",value:`home-${e}`}]),r=J.createMainTitle(t),l=D.createElement(a.par,[{name:"class",value:"home-text"}]),o=D.createElement(a.div,[{name:"class",value:`home-${e}-bg`}]),i=D.createElement(a.div,[{name:"class",value:`home-${e}-content`}]);return r.textContent=t,l.textContent=n,i.append(r,l),s.append(i,o),s}},Je=[{en:"According to Cornwell University and the University of British Columbia, the ideal typing posture is such that the keyboard is below your elbow height when seated, with your wrists straight and not planted on the surface of the desk.",ru:"По данным Корнуэллского университета и Университета Британской Колумбии, идеальной считается поза, при которой клавиатура находится ниже уровня локтя, когда вы сидите, а ваши запястья прямые и не касаются поверхности стола."},{en:"On a QWERTY keyboard, “stewardesses” is the longest 12 letter word that can be typed with the left hand and “polyphony” for the right.",ru:"На QWERTY-клавиатуре «stewardesses» — самое длинное слово из 12 букв, которое можно набрать левой рукой, а «polyphony» — правой."},{en:"The space bar is the most used key on the keyboard.  Every second, the spacebar on keyboards around the world are hit about six million times.",ru:"Пробел — самая часто используемая клавиша на клавиатуре. Каждую секунду пробел на клавиатурах по всему миру нажимается около шести миллионов раз."},{en:"CTRL ALT DEL is a famous shortcut to close a programme on your computer or shut down. This idea came from David Bradley at IBM to avoid accidental shut down when typing.",ru:"CTRL ALT DEL — известный шорткат для закрытия программы на компьютере или завершения работы. Эта идея (которая принадлежит Дэвиду Брэдли из IBM) помогла избежать случайного отключения при наборе текста."},{en:"Print Screen often abbreviated PrtScr or PrntScrn. It's original purpose was to capture the screen and print it on paper. Today it's used to capture the screen and save it to clipboard.",ru:"Print Screen часто обозначается аббревиатурой PrtScr или PrntScrn. Первоначальная цель заключалась в том, чтобы захватить экран и распечатать его на бумаге. Сегодня он используется для захвата экрана и сохранения его в буфер обмена."}];class Qe{static getRandomFact(){const e=Math.floor(Math.random()*Je.length);return Je[e][I.currentLang]}static createLessonsTest(){const e=D.createElement(a.section,[{name:"class",value:"layout-fact"}]),t=D.createElement(a.div,[{name:"class",value:"fact-bg"}]),n=D.createElement(a.par,[{name:"class",value:"base-text fact-text"}]);return n.textContent=Qe.getRandomFact(),e.append(t,n),e}}const Ze=Qe,Xe=class{static createSectionBtn(e,t){const n=D.createElement(a.btn,[{name:"class",value:`${e}-btn section-btn`}]),s=class{static createSectionTitle(e){const t=D.createElement(a.h4,[{name:"class",value:"section-title"}]);return t.textContent=e,t}}.createSectionTitle(t),r=D.createElement(a.div,[{name:"class",value:`${e}-bg section-btn-bg`}]);return n.append(s,r),n}},et=class{static createLayoutBtn(e,t,a){const n=Xe.createSectionBtn(`layout-${a}`,e);return n.addEventListener("click",(()=>{I.currentLayout=a,F.applyPage(s.lessons,t)})),n}},tt=class{static createGameDesc(e){const t=D.createElement(a.par,[{name:"class",value:"base-text game-desc-text"}]);return t.textContent=e,t}},at=class{static createGameSection(e,t,n,r,l){const o=class{static createGameSectionBtn(e,t,a,n){const r=Xe.createSectionBtn(e,t);return a===s.gameOne?r.addEventListener("click",(()=>{F.applyPage(s.gameOne,n)})):r.addEventListener("click",(()=>{F.applyPage(s.home,n)})),r}}.createGameSectionBtn(t,W[`${n}Title`][I.currentLang],r,l),i=D.createElement(a.section,[{name:"class",value:`${t}-desc`}]),c=tt.createGameDesc(W[`${n}DescFirst`][I.currentLang]),u=tt.createGameDesc(W[`${n}DescSecond`][I.currentLang]),d=tt.createGameDesc(W[`${n}DescThird`][I.currentLang]);i.append(c,u,d),e.append(o,i)}},nt=class{static createFilterBtn(e,t,n){const r=D.createElement(a.btn,[{name:"class",value:"filter-btn"}]);return n?r.classList.add(`filter-btn-${n}`):r.classList.add("filter-btn-all"),I.currentComplexity===n&&r.classList.add("active-filter"),r.textContent=e,r.addEventListener("click",(()=>{I.currentComplexity=n||void 0,F.applyPage(s.lessons,t)})),r}};class st{static clearState(){st.lessonsNumber=0,st.inputIndex=0,st.mistakes=[],st.historyMistakes=[],st.typing=!1,st.checkTime=0,st.typedChars=0,st.lineHeight=40}}st.lessonsNumber=0,st.inputIndex=0,st.mistakes=[],st.historyMistakes=[],st.typing=!1,st.checkTime=0,st.typedChars=0,st.lineHeight=C.normal;const rt=st,lt=class{static getLessons(e){return JSON.parse(e)}static setLessons(e){return JSON.stringify(e)}},ot=class{static getAllLessons(e){return e.lessonsEn!==w.noData&&I.currentLayout===u.en?lt.getLessons(e.lessonsEn):e.lessonsRu!==w.noData&&I.currentLayout===u.ru?lt.getLessons(e.lessonsRu):{}}},it=class{static createLessonsList(e,t){const n=D.createElement(a.div,[{name:"class",value:"lessons-list"}]);return n.append(...e.map(((e,n)=>class{static createLessonBtn(e,t,n){const r=D.createElement(a.btn,[{name:"class",value:"lesson-btn"}]),l=D.createElement(a.div,[{name:"class",value:"lesson-btn-top"}]),o=D.createElement(a.div,[{name:"class",value:`lesson-btn-index lesson-index-${e.complexity}`}]),i=D.createElement(a.div,[{name:"class",value:"lesson-btn-stars"}]);if(V.checkIfUserAuthorised()){const t=ot.getAllLessons(rt.user);if(0!==Object.keys(t).length&&t[e.index]){const n=t[e.index].lastScore;if(5-n)for(let e=0;e<5-n;e+=1){const e=D.createElement(a.div,[{name:"class",value:"lesson-btn-star-empty"}]);i.append(e)}for(let e=0;e<n;e+=1){const e=D.createElement(a.div,[{name:"class",value:"lesson-btn-star"}]);i.append(e)}}}const c=D.createElement(a.div,[{name:"class",value:`lesson-btn-bg lesson-bg-${e.complexity}`}]),u=D.createElement(a.h5,[{name:"class",value:"lesson-btn-title"}]);return o.textContent=`${t+1}`,u.textContent=e.title,l.append(o,i),r.append(l,c,u),r.addEventListener("click",(()=>{rt.lessonData=e,F.applyPage(s.lesson,n)})),r}}.createLessonBtn(e,n,t)))),n}};class ct{static getCorrections(){return ct.historyMistakes.length-ct.mistakes.length}static getAccuracy(){return(ct.typedChars+1-ct.mistakes.length-(ct.historyMistakes.length-ct.mistakes.length)/2)/(ct.typedChars+1)*100}static clearState(){ct.charIndex=0,ct.mistakes=[],ct.historyMistakes=[],ct.Typing=!1,ct.checkTime=0,ct.words=0,ct.typedChars=0}}ct.lang=r.en,ct.charIndex=0,ct.mistakes=[],ct.historyMistakes=[],ct.Typing=!1,ct.checkTime=0,ct.words=0,ct.typedChars=0;const ut=ct;class dt{static getTime(){return((new Date).valueOf()-ut.startTime.valueOf())/1e3}static startTimer(){ut.startTime=new Date;const e=setInterval((()=>{dt.stopTimer&&clearInterval(e),ut.checkTime=dt.getTime()}),100)}static getWpm(){return Math.floor(60*ut.words/dt.getTime())}}dt.stopTimer=!1;const pt=dt;class mt{static getTime(){return((new Date).valueOf()-rt.startTime.valueOf())/1e3}static startTimer(){rt.startTime=new Date;const e=setInterval((()=>{mt.stopTimer&&clearInterval(e),rt.checkTime=mt.getTime()}),100)}static getWpm(){const e=I.currentLayout===u.en?6:8,t=Math.floor(rt.inputIndex/e*60/mt.getTime());return rt.speed=t,t||1}}mt.stopTimer=!1;const gt=mt,ht=class{static createBackBtn(e,t){const n=D.createElement(a.btn,[{name:"class",value:"back-btn"}]);return n.textContent=W.backBtn[I.currentLang],n.addEventListener("click",(()=>{I.currentPage===s.test&&(ut.clearState(),pt.stopTimer=!0),I.currentPage===s.lesson&&(rt.clearState(),gt.stopTimer=!0),I.currentPage===s.lessons&&(I.currentComplexity=void 0),F.applyPage(e,t)})),n}},vt=class{static createLessonsMain(e){const t=ht.createBackBtn(s.layout,e),n=D.createElement(a.main,[{name:"class",value:"lessons"}]),r=D.createElement(a.div,[{name:"class",value:"lessons-top"}]),l=J.createMainTitle(W.lessonsTitle[I.currentLang]),o=class{static createLessonsFilters(e,t){const n=D.createElement(a.div,[{name:"class",value:"lessons-filters"}]),s=nt.createFilterBtn(W.lessonsFilterAll[I.currentLang],t),r=nt.createFilterBtn(W.lessonsFilterBasic[I.currentLang],t,c.easy),l=nt.createFilterBtn(W.lessonsFilterIntermediate[I.currentLang],t,c.medium),o=nt.createFilterBtn(W.lessonsFilterAdvanced[I.currentLang],t,c.hard);return n.append(s,r,l,o),n}}.createLessonsFilters(I.currentLayout,e),i=I.currentLayout,u=I.currentComplexity;return l.classList.add("lessons-title"),r.append(l,o),n.append(t,r),V.checkIfUserAuthorised()?Ee.getUser(I.currentUser.login).then((t=>{rt.user=t,Ee.getLessons({layout:i,complexity:u}).then((t=>{n.append(it.createLessonsList(t,e)),rt.lessonsNumber=t.length}))})):(rt.user=class{static createEmptyUser(){const e="noData";return{_id:e,__v:0,login:e,password:e,avatar:1,testing:e,lessonsEn:e,lessonsRu:e,typingAdventure:e,typingHero:e,badges:e}}}.createEmptyUser(),Ee.getLessons({layout:i,complexity:u}).then((t=>{n.append(it.createLessonsList(t,e)),rt.lessonsNumber=t.length}))),n}},ft=class{static createTestLangBtn(e,t){const n=D.createElement(a.btn,[{name:"class",value:"test-lang-btn"}]);return e===ut.lang&&n.classList.add("active-test-lang"),n.textContent=e,n.addEventListener("click",(()=>{ut.lang=e,ut.clearState(),pt.stopTimer=!0,F.applyPage(s.test,t)})),n}};class bt{static createTestResult(e){const t=D.createElement(a.div,[{name:"class",value:"test-result-ribbon"}]),n=D.createElement(a.par,[{name:"class",value:"result-ribbon-text"}]),s=D.createElement(a.span,[{name:"class",value:"result-ribbon-speed"}]),r=D.createElement(a.span,[{name:"class",value:"result-ribbon-accuracy"}]);return n.textContent=W.testResults[I.currentLang],s.textContent=`${W.testWpmText[I.currentLang]} ${e.textContent}`,r.textContent=`${W.testAccuracyText[I.currentLang]} ${Math.floor(ut.getAccuracy())} %`,t.append(n,s,r),t}static showTestResult(e){bt.visible||(bt.visible=!0,j.openModal(bt.createTestResult(e)))}}bt.visible=!1;const wt=bt,yt=D,Lt=I,Et={lvl:"lvl.",beastTitle:["cave beast","swamp beast","sand beast","stone beast","forest beast","cloud monster","waterfall monster","lava monster","tornado monster"],layoutButton:"back to games",resetButton:"reset progress",resetModalInfo:"Are you sure you want to reset the game progress and start over?",preparation:"preparation",yourMove:"your move!",beastMove:"beast move!",resistMessage:"\nresist!",resultNewLvl:"Level has been increased!\nNew beast on the map!",resultFinalLvl:"Congratulations!\nYou completed the game!",winnerHero:"You won!",winnerBeast:"Beast won!",lowStrengthMessage:"Now you are stronger!",toMap:"back to map",doneStatus:" (DONE)",welcomeModalTitle:"Welcome to the Typing Adventure!",welcomeModalMessage:"Defeat the strongest monsters of Typiria to win the crown and the title of fast typing professional!\nThe monsters have gone berserk and are not going to calm down! Luckily, elemental magic comes to your rescue!",welcomeModalWarning:"Please register to save your progress!",welcomeModalToLayoutBtn:"back to site",welcomeModalСontinue:"continue",startModalParagOne:"Before you is a game map on which various monsters appear. With each new level, your strength increases, and a new monster appears on the map.",startModalParagTwo:"Select a monster to enter the playing field. To defeat an opponent, you need to enter the names of magic spells that appear in the top plate of the playing field. You learn an enchantment: once cast, it is transferred to your collection.\nEnchantments of various elements are available in the game: fire, water, light, wind and thunder.",startModalParagThree:"Monsters are able to attack in different ways: magical or physical attacks.\nThe monster's magic attack is much stronger, but it can be repelled.\nMoreover, in addition to monsters, monsters that have protection from certain elements may also appear, be careful with them!",startModalParagFour:"If this is your first game, carefully read the hints on the playing field.",startModalParagFive:"Collect enchantments, win and get in-game achievements!\nGood luck!",startModalButton:"start the game",gameInfoTitle:"game info",gameInfoLvl:"your lvl",gameInfoHeroSpells:"your spells",gameInfoNullSpells:"you are on your way to learning!",gameInfoAllSpells:"game spells",gameInfoButton:"back to game",fieldTutorialModalParagOne:"You are on the Typing Adventure game field!",fieldTutorialModalParagTwo:"Check out a little hint guide before you start playing.",fieldTutorialModalParagThree:"Attention!\nFor the correct input of spells, the selected language in the system must match the language of the application!",fieldTutorialModalParagButtonStart:"hints",fieldTutorialModalParagButtonEsc:"skip",fieldTutorialHintOne:"The hero and the monster alternate moves, each move preceded by a preparation stage.\nDuring preparation, it is noted whose turn it will be, what spells are available in the cloud, or what attack the monster will have.",fieldTutorialHintTwo:"Spells appear randomly in the spell cloud and can be used by typing the name of the spell.\nIf the spell is new for your hero, after use it goes into the hero's collection.",fieldTutorialHintThree:"Here you can find a collection of hero spells. You can use both spells from the cloud and spells from the collection.\nThe principle of use is the same: you need to type the name of the spell.",fieldTutorialHintFour:'The monster can attack with both physics and magic. The magic attack is much stronger, but you can defend yourself by typing "resist" during the monster\'s turn with a magic attack. If successful, you will see the word "resist" appear in the action field.',fieldTutorialHintFive:"That's it, everything is quite simple, once again check that the layout in the system matches the selected language in the application, and go!",fieldTutorialButtonNext:"next",fieldTutorialButtonDone:"get start",achievementTitle:"New achievement!",achievementTitleLvlUp:"Wirst win!",achievementTextLvlUp:"Wow, you are not so simple!",achievementTitleTenSpells:"Wizard!",achievementTextTenSpells:"You have collected 10 spells!",achievementTitleHalfGame:"Almost there!",achievementTextHalfGame:"You are halfway through the game!",achievementTitleGameDone:"Typeria Conqueror!",achievementTextGameDone:"You completed Typing Adventure!",achievementTitleThunder:"Friend of thunder!",achievementTextThunder:"You have collected all thunder spells!",achievementTitleFire:"Friend of fire!",achievementTextFire:"You have collected all fire spells!",achievementTitleWater:"Friend of water!",achievementTextWater:"You have collected all water spells!",achievementTitleLight:"Friend of light!",achievementTextLight:"You have collected all light spells!",achievementTitleWind:"Friend of wind!",achievementTextWind:"You have collected all wind spells!"},Tt={lvl:"ур.",beastTitle:["пещерное чудище","болотное чудище","песчанное чудище","каменное чудище","лесное чущиде","облачный монстр","водопадный монстр","лавовый монстр","ураганный монстр"],layoutButton:"обратно к играм",resetButton:"сбросить прогресс",resetModalInfo:"Вы действительно хотите сбросить прогресс игры и начать заново?",preparation:"подготовка",yourMove:"ваш ход!",beastMove:"ход монстра!",resistMessage:"\nзащита!",resultNewLvl:"Повышение уровня!\nНовый монстр на карте!",resultFinalLvl:"Поздравляем!\nВы прошли всю игру!",winnerHero:"Вы победили!",winnerBeast:"Монстр победил!",lowStrengthMessage:"На этот раз ты сильнее!",toMap:"вернуться на карту",doneStatus:" (Пройден)",welcomeModalTitle:"Добро пожаловать в игру Typing Adventure!",welcomeModalMessage:"Одолейте сильнейших чудищ Тайпирии, чтобы завоевать корону и звание профессионала быстрой печати!\nЧудища разбуянились и успокаиваться не собираются! К счастью, вам на помощь приходит магия стихий!",welcomeModalWarning:"Пожалуйста, пройдите регистрацию для сохранения прогресса!",welcomeModalToLayoutBtn:"назад к сайту",welcomeModalСontinue:"продолжить",startModalParagOne:"Перед вами игровая карта, на которой появляются различные чудища. С каждым новым уровнем увеличивается ваша стойкость, а на карте возникает новое чудище.",startModalParagTwo:"Выберите чудище, чтобы попасть на игровое поле. Чтобы одолеть соперника, вам нужно вводить названия магических чар, которые появляются в верхней табличке игрового поля. Вы изучаете чары: после применения они переносятся в вашу коллекцию.\nВ игре доступны чары различных стихий: огня, воды, света, ветра и грома.",startModalParagThree:"Чудища способны атаковать разными способами: магической или физической атаками.\nМагическая атака чудища намного сильнее, однако её можно отразить.\nБолее того, помимо чудищ могут появится и монстры, которые имеют защиту от определённых стихий, будте с ними осторожнее!",startModalParagFour:"Если это ваша первая игра — внимательно прочтите подсказки на игровом поле.",startModalParagFive:"Собирайте чары, побеждайте и получайте игровые достижения!\nУдачи!",startModalButton:"начать игру",gameInfoTitle:"статистика",gameInfoLvl:"ваш уровень",gameInfoHeroSpells:"ваши чары",gameInfoNullSpells:"вы на пути к изучению!",gameInfoAllSpells:"чары в игре",gameInfoButton:"вернуться к игре",fieldTutorialModalParagOne:"Вы на игровом поле Typing Adventure!",fieldTutorialModalParagTwo:"Посмотрите небольшое руководство из подсказок, прежде чем начать играть.",fieldTutorialModalParagThree:"Внимание!\nДля корректного ввода чар выбранный язык в системе должен соответствовать языку приложения!",fieldTutorialModalParagButtonStart:"подсказки",fieldTutorialModalParagButtonEsc:"пропустить",fieldTutorialHintOne:"Герой и монстр ходят поочерёдно, каждому ходу предшествует стадия подготовки.\nВо время подготовки отмечается чей будет ход, какие спеллы доступны в облаке или какая атака будет у монстра.",fieldTutorialHintTwo:"В облаке спеллов в случайном порядке появляются спеллы, которые можно использовать: нужно напечатать название спелла.\nЕсли спелл новый для вашего героя - после использования он попадает в коллекцию героя.",fieldTutorialHintThree:"Здесь вы можете найти коллекцию спеллов героя. Можно использовать как спеллы из облака, так и спеллы из коллекции.\nПринцип использования такой же: нужно напечатать название спелла.",fieldTutorialHintFour:'Монстр может атаковать как силой, так и магией. Магическая атака намного сильнее, но вы можете защититься, напечатав "отразить" во время хода монстра с магической атакой. В случае успеха, вы увидете, как в поле действий появится слово "защита".',fieldTutorialHintFive:"Вот так, всё довольно просто, ещё раз проверьте соответствие раскладки в системе выбранному языку в приложении, и вперёд!",fieldTutorialButtonNext:"далее",fieldTutorialButtonDone:"начинаем!",achievementTitle:"Новое достижение!",achievementTitleLvlUp:"Первая победа!",achievementTextLvlUp:"А вы не так просты!",achievementTitleTenSpells:"Вы маг!",achievementTextTenSpells:"Вы собрали десять чар!",achievementTitleHalfGame:"Почти у цели!",achievementTextHalfGame:"Вы прошли половину игры!",achievementTitleGameDone:"Завоеватель Тайперии!",achievementTextGameDone:"Вы прошли Typing Adventure!",achievementTitleThunder:"Друг грома!",achievementTextThunder:"Вы собрали все чары грома!",achievementTitleFire:"Друг огня!",achievementTextFire:"Вы собрали все чары огня!",achievementTitleWater:"Друг воды!",achievementTextWater:"Вы собрали все чары воды!",achievementTitleLight:"Друг света!",achievementTextLight:"Вы собрали все чары света!",achievementTitleWind:"Друг ветра!",achievementTextWind:"Вы собрали все чары ветра!"},St={1:{fire:{name:"fire",damage:"10"},water:{name:"water",damage:"10"},wind:{name:"wind",damage:"10"}},2:{light:{name:"light",damage:"10"},tunder:{name:"thunder",damage:"10"}},3:{sunfire:{name:"sunfire",damage:"50"},"aqua vortex":{name:"aqua vortex",damage:"40"},"wind vortex":{name:"wind vortex",damage:"50"}},4:{soundwave:{name:"soundwave",damage:"40"},"fiery hail":{name:"fiery hail",damage:"50"},"ligth wall":{name:"ligth wall",damage:"40"}},5:{"thunder blow":{name:"thunder blow",damage:"40"},"rising glow":{name:"rising glow",damage:"50"},"water storm":{name:"water storm",damage:"50"}},6:{"shining vortex":{name:"shining vortex",damage:"50"},"furious flow":{name:"furious flow",damage:"50"},windspout:{name:"windspout",damage:"50"}},7:{waterspout:{name:"waterspout",damage:"50"},"massive tornado":{name:"massive tornado",damage:"70"},"lightning blast":{name:"lightning blast",damage:"70"}},8:{"fiery hurricane":{name:"fiery hurricane",damage:"100"},"furious whirlwind":{name:"furious whirlwind",damage:"150"},"luminous pillar":{name:"luminous pillar",damage:"150"}},9:{"whirlwind lightning":{name:"whirlwind lightning",damage:"150"},"burning onslaught":{name:"burning onslaught",damage:"150"},"elemental magic":{name:"elemental magic",damage:"100"}},10:{"elemental high magic":{name:"elemental high magic",damage:"250"},"elemental great magic":{name:"elemental great magic",damage:"300"}}},xt={1:{fire:{name:"огонь",damage:"10"},water:{name:"вода",damage:"10"},wind:{name:"ветер",damage:"10"}},2:{light:{name:"свет",damage:"10"},tunder:{name:"гром",damage:"10"}},3:{sunfire:{name:"огненный вихрь",damage:"50"},"aqua vortex":{name:"водный вихрь",damage:"40"},"wind vortex":{name:"воздушный вихрь",damage:"50"}},4:{soundwave:{name:"громовая волна",damage:"40"},"fiery hail":{name:"огненный град",damage:"50"},"ligth wall":{name:"стена света",damage:"40"}},5:{"thunder blow":{name:"удар грома",damage:"40"},"rising glow":{name:"восход сияния",damage:"50"},"water storm":{name:"водяная буря",damage:"50"}},6:{"shining vortex":{name:"сияющий вихрь",damage:"50"},"furious flow":{name:"яростный поток",damage:"50"},windspout:{name:"воздушный смерч",damage:"50"}},7:{waterspout:{name:"водяной смерч",damage:"50"},"massive tornado":{name:"гигантский торнадо",damage:"70"},"lightning blast":{name:"удар молнии",damage:"70"}},8:{"fiery hurricane":{name:"огненный ураган",damage:"100"},"furious whirlwind":{name:"яростный ветер",damage:"150"},"luminous pillar":{name:"световой столп",damage:"150"}},9:{"whirlwind lightning":{name:"вихревая молния",damage:"150"},"burning onslaught":{name:"огненный натиск",damage:"150"},"elemental magic":{name:"стихийная магия",damage:"100"}},10:{"elemental high magic":{name:"высшая стихийная магия",damage:"250"},"elemental great magic":{name:"великая стихийная магия",damage:"300"}}},Ct={thunderSpells:["thunder","thunder blow","soundwave","lightning blast","whirlwind lightning"],fireSpells:["fire","sunfire","fiery hail","fiery hurricane","burning onslaught"],waterSpells:["water","aqua vortex","furious flow","water storm","waterspout"],windSpells:["wind","wind vortex","windspout","massive tornado","furious whirlwind"],lightSpells:["light","ligth wall","rising glow","shining vortex","luminous pillar"]},kt={thunderSpells:["гром","удар грома","громовая волна","удар молнии","вихревая молния"],fireSpells:["огонь","огненный вихрь","огненный град","огненный ураган","огненный натиск"],waterSpells:["вода","водный вихрь","яростный поток","водяная буря","waterspout"],windSpells:["ветер","воздушный вихрь","водяной смерч","гигантский торнадо","яростный ветер"],lightSpells:["свет","стена света","восход сияния","сияющий вихрь","световой столп"]},Bt={physics:{name:"physics",damage:"10"},magic:{name:"magic",damage:"30"}},Mt={physics:{name:"сила",damage:"10"},magic:{name:"магия",damage:"30"}};class It{static engageState(){It.currentLang=Lt.currentLang,It.lib="en"===It.currentLang?Et:Tt,It.beastMoves="en"===It.currentLang?Bt:Mt,It.spellsLib="en"===It.currentLang?St:xt,It.elementalSpells="en"===It.currentLang?Ct:kt}}It.firstAppearance=!0,It.firstFieldAppearance=!0,It.userLvl=1,It.userHp=100,It.userSpells=[],It.currentGameBeasts=[];const At=It;class Pt{static createRandomNumber(e){const t=Math.random()*e;return Math.trunc(t)}static createRandomNums(e,t){const a=[];for(let n=0;a.length<e;n+=1){const e=Pt.createRandomNumber(t);a.includes(e)||a.push(e)}return a}static randomBeastHp(e){const t=100*e,a=100*Math.random()+t;return 10*Math.trunc(a/10)}}const Rt=Pt;class $t{}$t.spellCapture=!1,$t.currentMove=!0,$t.beastTypeAction=[];const Dt=$t;var Ht;!function(e){e[e.heroTimer=5]="heroTimer",e[e.beastTimer=3]="beastTimer",e[e.startTimer=5e3]="startTimer",e[e.allBeastsTypes=9]="allBeastsTypes",e[e.randomSpellsAmount=1]="randomSpellsAmount",e[e.firstAction=0]="firstAction",e[e.secondAction=1]="secondAction",e[e.thirdAction=2]="thirdAction",e[e.firstLvl=1]="firstLvl",e[e.achievementTimer=7e3]="achievementTimer",e[e.achievementStyleTop=20]="achievementStyleTop",e[e.achievementAnotherModal=170]="achievementAnotherModal"}(Ht||(Ht={}));const Ft=Ht;class Ut{static modalElements(e){return{overlay:yt.createElement(a.div,[{name:"class",value:`${e}-modal-overlay`}]),modal:yt.createElement(a.div,[{name:"class",value:`${e}-modal-window`}]),modalText:yt.createElement(a.par,[{name:"class",value:`${e}-modal-content`}]),button:yt.createElement(a.btn,[{name:"class",value:`${e}-modal-button`}])}}static createFieldModal(e,t){const{overlay:n,modal:s,modalText:r,button:l}=Ut.modalElements("field");r.textContent=e,l.textContent=At.lib.toMap,l.addEventListener("click",(()=>{n.remove(),Dt.beastInstance.renderCallback()})),t?(yt.createElement(a.par,[{name:"class",value:"field-modal-content-info"}]).textContent=t,s.append(r,l)):s.append(r,l),n.append(s),At.gameWrapper.append(n)}static createWelcomeModal(e){const{overlay:t,modal:n,modalText:s,button:r}=Ut.modalElements("welcome"),l=yt.createElement(a.par,[{name:"class",value:"welcome-modal-text"}]),o=yt.createElement(a.par,[{name:"class",value:"welcome-modal-warning"}]),i=yt.createElement(a.par,[{name:"class",value:"welcome-modal-buttons"}]),c=yt.createElement(a.btn,[{name:"class",value:"welcome-layout-button"}]);l.textContent=At.lib.welcomeModalTitle,s.textContent=At.lib.welcomeModalMessage,o.textContent=At.lib.welcomeModalWarning,c.textContent=At.lib.welcomeModalToLayoutBtn,r.textContent=At.lib["welcomeModalСontinue"],c.addEventListener("click",(()=>{At.appCallbacks.switchPage(At.appCallbacks.page,At.appCallbacks.render)})),r.addEventListener("click",(()=>{Ut.createStartModal(),t.remove()})),i.append(c,r),n.append(l,s,o,i),t.append(n),At.firstAppearance=!1,e(),At.gameWrapper.append(t)}static createStartModal(){const{overlay:e,modal:t,modalText:n,button:s}=Ut.modalElements("start"),r=["startModalParagOne","startModalMap","startModalParagTwo","startModalField","startModalParagThree","startModalParagFour"].map((e=>{if("startModalMap"===e)return yt.createElement(a.img,[{name:"class",value:"start-modal-img"},{name:"alt",value:"game-map"},{name:"src",value:"./assets/typing-adventure/map.png"}]);if("startModalField"===e)return yt.createElement(a.img,[{name:"class",value:"start-modal-img"},{name:"alt",value:"game-map"},{name:"src",value:"./assets/typing-adventure/basic-field.png"}]);const t=yt.createElement(a.par,[{name:"class",value:"start-modal-text"}]);return t.textContent=At.lib[e],t}));n.textContent=At.lib.startModalParagFive,s.textContent=At.lib.startModalButton,s.addEventListener("click",(()=>{e.remove()})),t.append(...r,n,s),e.append(t),At.gameWrapper.append(e)}}const Wt=Ut;class Ot{static spellChecker(e,t,a){let n=+a;return e.forEach((e=>{e===t&&(n/=2)})),n}static handler(e,t){const{beastType:a}=Dt.beastInstance;let n=+t;return a.includes("cloud")||a.includes("облачный")?n=Ot.spellChecker(At.elementalSpells.thunderSpells,e,t):a.includes("lava")||a.includes("лавовый")?n=Ot.spellChecker(At.elementalSpells.fireSpells,e,t):a.includes("waterfall")||a.includes("водопадный")?n=Ot.spellChecker(At.elementalSpells.waterSpells,e,t):(a.includes("tornado")||a.includes("ураганный"))&&(n=Ot.spellChecker(At.elementalSpells.windSpells,e,t)),n.toString()}}const Nt=Ot;class Gt{static heroEventHandler(e){Dt.spellCapture&&(Gt.inputStr+=e.key,Dt.heroSpells.forEach((e=>{if(Gt.inputStr.includes(e.name)){Gt.totalSpells.push(e.name);const t=Nt.handler(e.name,e.damage);Gt.totalEffects.push(t),Nt.handler(e.name,e.damage),Dt.actionTotal.textContent=Gt.totalSpells.join(" & "),Gt.inputStr=""}})),Gt.spells.forEach((e=>{if(Gt.inputStr.includes(e.name)&&!Dt.heroSpells.includes(e)){Dt.heroSpells.push(e),Gt.totalSpells.push(e.name);const t=Nt.handler(e.name,e.damage);Gt.totalEffects.push(t),Dt.actionTotal.textContent=Gt.totalSpells.join(" & "),Gt.inputStr=""}})))}static beastEventHandler(e){Gt.inputStr+=e.key,(Gt.inputStr.includes("resist")||Gt.inputStr.includes("отразить"))&&(Gt.heroShield=!0,Dt.actionTotal.textContent+=At.lib.resistMessage,window.removeEventListener("keypress",Gt.beastEventHandler))}static effectsHandler(){let e=Gt.totalEffects.reduce(((e,t)=>+t+e),0);Gt.heroShield&&(e=Math.trunc(e/=2),Gt.heroShield=!1),"hero"===Gt.whoseMove&&Gt.resultMoveHandler(e,Dt.beastHp),"beast"===Gt.whoseMove&&Gt.resultMoveHandler(e,Dt.heroHp),Gt.whoseMove="",Gt.totalEffects=[]}static resultMoveHandler(e,t){const a=t,n=a.textContent;if(!n)return;let s=+n-e;s<0&&(s=0),Gt.createResultView(e),0===s?(a.textContent=At.lib.lowStrengthMessage,Dt.FieldStatus=!1,Gt.resultHandler(Gt.whoseMove)):a.textContent=s.toString()}static createResultView(e){const t=yt.createElement(a.par,[{name:"class",value:"field-hp-result-view"}]);t.textContent=`-${e}`,setTimeout((()=>{t.remove()}),Ft.startTimer),"hero"===Gt.whoseMove&&Dt.beastView.append(t),"beast"===Gt.whoseMove&&Dt.heroView.append(t)}static heroMoveAction(e){Gt.whoseMove="hero",Gt.spells=e,Gt.inputStr="",Gt.totalSpells=[],window.addEventListener("keypress",Gt.heroEventHandler)}static resultHandler(e){const t=Dt.beastInstance.lvl,a=At.userLvl;let n;if(n="hero"===e?At.lib.winnerHero:At.lib.winnerBeast,10===t&&"hero"===e){const e=At.lib.resultFinalLvl;Dt.beastInstance.done=!0,Wt.createFieldModal(n,e)}else if(a===t&&"hero"===e){const e=At.lib.resultNewLvl;At.userLvl+=1,Dt.beastInstance.done=!0,Wt.createFieldModal(n,e)}else Wt.createFieldModal(n);Dt.currentMove=!0}static beastMoveAction(){Gt.whoseMove="beast",Gt.inputStr="","magic"!==Dt.actionTotal.textContent&&"магия"!==Dt.actionTotal.textContent||window.addEventListener("keypress",Gt.beastEventHandler)}static moveHandlerStop(){window.removeEventListener("keypress",Gt.beastEventHandler),window.removeEventListener("keypress",Gt.heroEventHandler)}}Gt.inputStr="",Gt.totalSpells=[],Gt.totalEffects=[],Gt.heroShield=!1,Gt.whoseMove="";const zt=Gt;class jt{static startModal(e){const{overlay:t,modal:n,modalText:s,button:r}=Wt.modalElements("field-tutorial"),l=yt.createElement(a.par,[{name:"class",value:"field-tutorial-title"}]),o=yt.createElement(a.par,[{name:"class",value:"field-tutorial-warning"}]),i=yt.createElement(a.btn,[{name:"class",value:"field-tutorial-button"}]),c=yt.createElement(a.div,[{name:"class",value:"field-tutorial-buttons"}]);l.textContent=At.lib.fieldTutorialModalParagOne,s.textContent=At.lib.fieldTutorialModalParagTwo,o.textContent=At.lib.fieldTutorialModalParagThree,r.textContent=At.lib.fieldTutorialModalParagButtonStart,i.textContent=At.lib.fieldTutorialModalParagButtonEsc,jt.tutorialOverlay=t,r.addEventListener("click",(()=>{jt.createHintOne(),n.remove()})),i.addEventListener("click",(()=>{t.remove(),e()})),c.append(r,i),n.append(l,s,o,c),t.append(n),jt.actionFunc=e,At.gameWrapper.append(t)}static tutorialHint(e,t,a,n,s,r){const{modal:l,modalText:o,button:i}=Wt.modalElements(e);o.textContent=t,i.textContent=s||At.lib.fieldTutorialButtonNext,i.addEventListener("click",(()=>{n(),l.remove(),r&&jt.tutorialOverlay.remove()})),l.append(o,i),a.append(l)}static createHintOne(){const e=At.lib.fieldTutorialHintOne;jt.tutorialHint("hint-one",e,Dt.actionTotal,jt.createHintTwo)}static createHintTwo(){const e=At.lib.fieldTutorialHintTwo;jt.tutorialHint("hint-two",e,Dt.spellsPanel,jt.createHintThree)}static createHintThree(){const e=At.lib.fieldTutorialHintThree;jt.tutorialHint("hint-three",e,Dt.heroPanel,jt.createHintFour)}static createHintFour(){const e=At.lib.fieldTutorialHintFour;jt.tutorialHint("hint-four",e,Dt.beastPanel,jt.createFinalHint)}static createFinalHint(){const e=At.lib.fieldTutorialHintFive,t=At.lib.fieldTutorialButtonDone;jt.tutorialHint("hint-five",e,Dt.actionTotal,jt.actionFunc,t,!0)}}const qt=jt,Vt={fire:"fire",огонь:"fire",water:"water",вода:"water",wind:"wind",ветер:"wind",light:"light",свет:"light",thunder:"thunder",гром:"thunder",sunfire:"sunfire","огненный вихрь":"sunfire","aqua vortex":"aqua-vortex","водный вихрь":"aqua-vortex","wind vortex":"wind-vortex","воздушный вихрь":"wind-vortex",soundwave:"soundwave","громовая волна":"soundwave","fiery hail":"fiery-hail","огненный град":"fiery-hail","ligth wall":"ligth-wall","стена света":"ligth-wall","thunder blow":"thunder-blow","удар грома":"thunder-blow","rising glow":"rising-glow","восход сияния":"rising-glow","water storm":"water-storm","водяная буря":"water-storm","shining vortex":"shining-vortex","сияющий вихрь":"shining-vortex","furious flow":"furious-flow","яростный поток":"furious-flow",windspout:"windspout","воздушный смерч":"windspout",waterspout:"waterspout","водяной смерч":"waterspout","massive tornado":"massive-tornado","гигантский торнадо":"massive-tornado","lightning blast":"lightning-blast","удар молнии":"lightning-blast","fiery hurricane":"fiery-hurricane","огненный ураган":"fiery-hurricane","furious whirlwind":"furious-whirlwind","яростный ветер":"furious-whirlwind","luminous pillar":"luminous-pillar","световой столп":"luminous-pillar","whirlwind lightning":"whirlwind-lightning","вихревая молния":"whirlwind-lightning","burning onslaught":"burning-onslaught","огненный натиск":"burning-onslaught","elemental magic":"elemental-magic","стихийная магия":"elemental-magic","elemental high magic":"elemental-high-magic","высшая стихийная магия":"elemental-high-magic","elemental great magic":"elemental-great-magic","великая стихийная магия":"elemental-great-magic"},Yt={"cave beast":"cave-beast","пещерное чудище":"cave-beast","swamp beast":"swamp-beast","болотное чудище":"swamp-beast","sand beast":"sand-beast","песчанное чудище":"sand-beast","stone beast":"stone-beast","каменное чудище":"stone-beast","forest beast":"forest-beast","лесное чудище":"forest-beast","cloud monster":"cloud-monster","облачный монстр":"cloud-monster","waterfall monster":"waterfall-monster","водопадный монстр":"waterfall-monster","lava monster":"lava-monster","лавовый монстр":"lava-monster","tornado monster":"tornado-monster","ураганный монстр":"tornado-monster"};class Kt{static action(){Dt.FieldStatus?At.firstFieldAppearance?Kt.launchTutorial():(Kt.viewHeroSpells(),Kt.randomBeastActions(),Kt.viewBeastActions(),Dt.currentMove?Kt.heroMove():Kt.beastMove()):Kt.clearPanels()}static launchTutorial(){Dt.actionTotal.textContent=At.lib.preparation,Dt.timer.textContent=At.lib.yourMove,Kt.createCurrentSpellAction([At.spellsLib[Ft.firstLvl].fire],Dt.heroPanel),Kt.createCurrentSpellAction([At.beastMoves.physics,At.beastMoves.magic],Dt.beastPanel),Kt.createCurrentSpellAction([At.spellsLib[Ft.firstLvl].wind],Dt.spellsPanel),At.firstFieldAppearance=!1,qt.startModal(Kt.action)}static heroMove(){Dt.timerCounter=Ft.heroTimer;const e=Kt.randomSpells();Kt.createCurrentSpellAction(e,Dt.spellsPanel),Dt.actionTotal.textContent=At.lib.preparation,Dt.timer.textContent=At.lib.yourMove,Dt.currentMove=!1,setTimeout((()=>{Dt.timer.textContent=`${Dt.timerCounter}`,Dt.actionTotal.textContent="",Kt.timerChanger(),Dt.spellCapture=!0,zt.heroMoveAction(e)}),Ft.startTimer)}static beastMove(){Dt.timerCounter=Ft.beastTimer,Dt.actionTotal.textContent=At.lib.preparation,Dt.timer.textContent=At.lib.beastMove,Dt.currentMove=!0,setTimeout((()=>{Dt.timer.textContent=`${Dt.timerCounter}`,Kt.nextBeastActions(),Kt.timerChanger(),zt.beastMoveAction()}),Ft.startTimer)}static timerChanger(){setTimeout((()=>{Dt.timerCounter-=1,Dt.timer.textContent=`${Dt.timerCounter}`,Dt.timerCounter>=0?Kt.timerChanger():(zt.effectsHandler(),Dt.spellCapture=!1,zt.moveHandlerStop(),Kt.action())}),1e3)}static randomSpells(){const e=Dt.lvlSpells.length;return Rt.createRandomNums(Ft.randomSpellsAmount,e).map((e=>Dt.lvlSpells[e]))}static createCurrentSpellAction(e,t){const n=t;n.innerHTML="",e.forEach((e=>{const t=yt.createElement(a.div,[{name:"class",value:"action-spell-wrapper"}]),s=yt.createElement(a.div,[{name:"class",value:`action-spell-image ${Vt[e.name]}`}]),r=yt.createElement(a.par,[{name:"class",value:"action-spell-name"}]);r.textContent=e.name,t.append(s,r),n.append(t)}))}static viewHeroSpells(){Dt.heroSpells=At.userSpells,Kt.createCurrentSpellAction(Dt.heroSpells,Dt.heroPanel)}static randomBeastActions(){const e=At.beastMoves.physics.name,t=At.beastMoves.magic.name;let a=+At.beastMoves.physics.damage,n=+At.beastMoves.magic.damage;Dt.beastInstance.lvl>1&&(a+=5*Dt.beastInstance.lvl,n+=5*Dt.beastInstance.lvl);const s=[{name:e,damage:`${a}`},{name:t,damage:`${n}`}],r=Rt.createRandomNums(s.length,s.length).map((e=>s[e]));Dt.beastTypeAction.push(...r)}static viewBeastActions(){const e=Dt.beastTypeAction[Ft.firstAction],t=Dt.beastTypeAction[Ft.secondAction];Kt.createCurrentSpellAction([e,t],Dt.beastPanel)}static nextBeastActions(){const e=Dt.beastTypeAction[Ft.firstAction],t=Dt.beastTypeAction[Ft.secondAction],a=Dt.beastTypeAction[Ft.thirdAction];Dt.beastTypeAction.shift(),Dt.actionTotal.textContent=e.name,zt.totalEffects.push(e.damage),Kt.createCurrentSpellAction([t,a],Dt.beastPanel)}static clearPanels(){Dt.timer.textContent="-.-",Dt.actionInput.textContent="",Dt.actionTotal.textContent=""}}const _t=Kt;class Jt{static createField(){const e=yt.createElement(a.div,[{name:"class",value:"field-wrapper"}]),t=Jt.createFieldHeader(),n=Jt.createFieldMiddle(Dt.beastInstance),s=Jt.createFieldFooter();e.append(t,n,s),At.gameWrapper.innerHTML="",At.gameWrapper.append(e);const r=Object.values(At.spellsLib[Dt.beastInstance.lvl]);Dt.lvlSpells=r,Dt.FieldStatus=!0,Dt.beastTypeAction=[],_t.action()}static createFieldHeader(){const e=yt.createElement(a.div,[{name:"class",value:"field-header"}]);return Dt.spellsPanel=yt.createElement(a.div,[{name:"class",value:"spells-field-panel"}]),e.append(Dt.spellsPanel),e}static createFieldMiddle(e){const t=yt.createElement(a.div,[{name:"class",value:"field-middle"}]),n=yt.createElement(a.div,[{name:"class",value:"action-field-panel"}]);Dt.timer=yt.createElement(a.div,[{name:"class",value:"field-timer"}]),Dt.actionInput=yt.createElement(a.div,[{name:"class",value:"action-field-input"}]),Dt.actionTotal=yt.createElement(a.div,[{name:"class",value:"action-field-total"}]);const s=Jt.createCharacterView("hero"),r=Jt.createCharacterView("beast",e);return n.append(Dt.timer,Dt.actionInput,Dt.actionTotal),t.append(s,n,r),t}static createFieldFooter(){const e=yt.createElement(a.div,[{name:"class",value:"field-footer"}]);return Dt.heroPanel=yt.createElement(a.div,[{name:"class",value:"hero-field-panel"}]),Dt.beastPanel=yt.createElement(a.div,[{name:"class",value:"beast-field-panel"}]),e.append(Dt.heroPanel,Dt.beastPanel),e}static createCharacterView(e,t){const n=yt.createElement(a.div,[{name:"class",value:`${e}-field-wrapper`}]),s=yt.createElement(a.par,[{name:"class",value:`${e}-field-hp`}]);let r;return r=t?yt.createElement(a.par,[{name:"class",value:`${e}-field-view ${Yt[t.beastType]}`}]):yt.createElement(a.par,[{name:"class",value:`${e}-field-view`}]),t?(s.textContent=t.hp.toString(),Dt.beastHp=s,Dt.beastView=n):(s.textContent=(At.userHp*At.userLvl).toString(),Dt.heroHp=s,Dt.heroView=n),n.append(s,r),n}}const Qt=Jt,Zt=class{constructor(e,t,a,n,s){this.beastType=e,this.lvl=t,this.hp=a,this.renderCallback=n,this.done=s}createBeast(){const e=yt.createElement(a.div,[{name:"class",value:"beast-wrapper"}]),t=yt.createElement(a.div,[{name:"class",value:"beast-title"}]),n=yt.createElement(a.div,[{name:"class",value:"beast"}]);return t.innerHTML=`${this.beastType}<br>${At.lib.lvl} ${this.lvl}`,this.done&&(t.innerHTML+=At.lib.doneStatus),e.append(t,n),e.addEventListener("click",(()=>{Dt.beastInstance=this,Qt.createField()})),e}};class Xt{static setStatus(){At.achievementsCurrentStatus=Xt.current}static createWindow(e,t,n){const s=yt.createElement(a.div,[{name:"class",value:"achievement-modal"}]),r=yt.createElement(a.div,[{name:"class",value:"achievement-title"}]),l=yt.createElement(a.div,[{name:"class",value:"achievement-text"}]),o=yt.createElement(a.div,[{name:"class",value:"achievement-text"}]),i=yt.createElement(a.img,[{name:"class",value:"achievement-img"},{name:"alt",value:"achievement-image"},{name:"src",value:n}]),c=yt.createElement(a.div,[{name:"class",value:"achievement-content-wrapper"}]),u=yt.createElement(a.div,[{name:"class",value:"achievement-text-wrapper"}]);r.textContent=At.lib.achievementTitle,l.textContent=e,o.textContent=t,u.append(l,o),c.append(i,u),s.append(r,c);let d=Ft.achievementStyleTop;for(let e=0;e<Xt.windowsCounter;e+=1)d+=Ft.achievementAnotherModal;s.style.top=`${d}px`,At.gameWrapper.append(s),Xt.windowsCounter+=1,setTimeout((()=>{s.remove(),Xt.windowsCounter-=1}),Ft.achievementTimer)}static checker(){Xt.current.tenSpells||Xt.tenSpellsCheck(),Xt.current.lvlUp||Xt.lvlUpCheck(),Xt.current.halfGame||Xt.halfGameCheck(),Xt.current.gameDone||Xt.gameDoneCheck(),Xt.current.thunderSpells||Xt.thunderCheck(),Xt.current.fireSpells||Xt.fireCheck(),Xt.current.waterSpells||Xt.waterCheck(),Xt.current.lightSpells||Xt.lightCheck(),Xt.current.windSpells||Xt.windCheck(),Xt.setStatus()}static tenSpellsCheck(){if(At.userSpells.length>=10){const e=At.lib.achievementTitleTenSpells,t=At.lib.achievementTextTenSpells;Xt.createWindow(e,t,"./assets/typing-adventure/achievement.png"),Xt.current.tenSpells=!0}}static lvlUpCheck(){if(2===At.userLvl){const e=At.lib.achievementTitleLvlUp,t=At.lib.achievementTextLvlUp;Xt.createWindow(e,t,"./assets/typing-adventure/achievement.png"),Xt.current.lvlUp=!0}}static halfGameCheck(){if(5===At.userLvl){const e=At.lib.achievementTitleHalfGame,t=At.lib.achievementTextHalfGame;Xt.createWindow(e,t,"./assets/typing-adventure/achievement.png"),Xt.current.halfGame=!0}}static gameDoneCheck(){if(10===At.userLvl){const e=At.lib.achievementTitleGameDone,t=At.lib.achievementTextGameDone;Xt.createWindow(e,t,"./assets/typing-adventure/achievement.png"),Xt.current.gameDone=!0}}static thunderCheck(){if(Xt.elementalCheck("thunderSpells")){const e=At.lib.achievementTitleThunder,t=At.lib.achievementTextThunder;Xt.createWindow(e,t,"./assets/typing-adventure/achievement.png"),Xt.current.thunderSpells=!0}}static fireCheck(){if(Xt.elementalCheck("fireSpells")){const e=At.lib.achievementTitleFire,t=At.lib.achievementTextFire;Xt.createWindow(e,t,"./assets/typing-adventure/achievement.png"),Xt.current.fireSpells=!0}}static waterCheck(){if(Xt.elementalCheck("waterSpells")){const e=At.lib.achievementTitleWater,t=At.lib.achievementTextWater;Xt.createWindow(e,t,"./assets/typing-adventure/achievement.png"),Xt.current.waterSpells=!0}}static lightCheck(){if(Xt.elementalCheck("lightSpells")){const e=At.lib.achievementTitleLight,t=At.lib.achievementTextLight;Xt.createWindow(e,t,"./assets/typing-adventure/achievement.png"),Xt.current.lightSpells=!0}}static windCheck(){if(Xt.elementalCheck("windSpells")){const e=At.lib.achievementTitleWind,t=At.lib.achievementTextWind;Xt.createWindow(e,t,"./assets/typing-adventure/achievement.png"),Xt.current.windSpells=!0}}static elementalCheck(e){return At.elementalSpells[e].every((e=>At.userSpells.some((t=>t.name===e))))}}Xt.current={thunderSpells:!1,fireSpells:!1,waterSpells:!1,lightSpells:!1,windSpells:!1,tenSpells:!1,lvlUp:!1,halfGame:!1,gameDone:!1},Xt.achievementsNums={tenSpells:2,lvlUp:1,halfGame:3,gameDone:4,thunderSpells:5,fireSpells:6,waterSpells:7,lightSpells:8,windSpells:9},Xt.windowsCounter=0;const ea=Xt;class ta{static lvlSpells(e){const t=Object.keys(At.spellsLib[e]),a=At.userSpells.map((e=>e.name));return t.map((t=>At.spellsLib[e][t].name)).map((e=>a.includes(e)?ta.createTextWrapper(e,"info-spell available"):ta.createTextWrapper(e,"info-spell")))}static createInfoModal(){const{overlay:e,modal:t,button:a}=Wt.modalElements("game-info"),n=ta.createTextWrapper(At.lib.gameInfoTitle,"game-info-title"),s=ta.createTextWrapper(At.lib.gameInfoLvl,"info-title"),r=ta.createTextWrapper(At.userLvl.toString(),"info-lvl"),l=ta.createTextWrapper(At.lib.gameInfoHeroSpells,"info-title");let o=At.userSpells.map((e=>ta.createTextWrapper(e.name,"info-user-spell")));o.length||(o=[ta.createTextWrapper(At.lib.gameInfoNullSpells,"info-user-spell")]);const i=ta.createTextWrapper(At.lib.gameInfoAllSpells,"lvl-spells-title");a.textContent=At.lib.gameInfoButton,a.addEventListener("click",(()=>{e.remove()})),t.append(n,s,r,l,...o,i,...ta.gameSpellsView(),a),e.append(t),At.gameWrapper.append(e)}static gameSpellsView(){return[ta.createTextWrapper(`${At.lib.lvl} 1`,"lvl-spells-title"),...ta.lvlSpells(1),ta.createTextWrapper(`${At.lib.lvl} 2`,"lvl-spells-title"),...ta.lvlSpells(2),ta.createTextWrapper(`${At.lib.lvl} 3`,"lvl-spells-title"),...ta.lvlSpells(3),ta.createTextWrapper(`${At.lib.lvl} 4`,"lvl-spells-title"),...ta.lvlSpells(4),ta.createTextWrapper(`${At.lib.lvl} 5`,"lvl-spells-title"),...ta.lvlSpells(5),ta.createTextWrapper(`${At.lib.lvl} 6`,"lvl-spells-title"),...ta.lvlSpells(6),ta.createTextWrapper(`${At.lib.lvl} 7`,"lvl-spells-title"),...ta.lvlSpells(7),ta.createTextWrapper(`${At.lib.lvl} 8`,"lvl-spells-title"),...ta.lvlSpells(8),ta.createTextWrapper(`${At.lib.lvl} 9`,"lvl-spells-title"),...ta.lvlSpells(9)]}static createTextWrapper(e,t){const n=yt.createElement(a.par,[{name:"class",value:t}]);return n.textContent=e,n}}const aa=ta;class na{static state(){At.firstAppearance=!0,At.firstFieldAppearance=!0,At.userLvl=1,At.userHp=100,At.userSpells=[],At.currentGameBeasts=[]}static resetMethod(e){const{overlay:t,modal:a,modalText:n,button:s}=Wt.modalElements("reset-state");n.textContent=At.lib.resetModalInfo,s.textContent=At.lib.resetButton,s.addEventListener("click",(()=>{na.state(),t.remove(),e()})),a.append(n,s),t.append(a),At.gameWrapper.append(t)}}const sa=na,ra=class{static getGameData(e){return JSON.parse(e)}static setGameData(e){return JSON.stringify(e)}},la=class{static getBadges(e){return JSON.parse(e)}static setBadges(e){return JSON.stringify(e)}};class oa{static getData(e,t){if(oa.userData=e,"noData"===e.typingAdventure)return;if(!e.typingAdventure)return;const a=ra.getGameData(e.typingAdventure);if(void 0!==a.firstMapRender&&(At.firstAppearance=a.firstMapRender),void 0!==a.firstFieldRender&&(At.firstFieldAppearance=a.firstFieldRender),a.userLvl&&(At.userLvl=a.userLvl),a.achievements&&(At.achievementsCurrentStatus=a.achievements),a.gameBeasts&&(At.currentGameBeasts=a.gameBeasts.map((e=>new Zt(e.beastType,e.lvl,e.hp,t,e.done)))),a.userSpells){const e=a.userSpells;At.userSpells=[],e.forEach((e=>{oa.engageSpell(e.name)}))}}static engageSpell(e){Object.keys(At.spellsLib).forEach((t=>{const a=At.spellsLib[+t];Object.keys(a).forEach((t=>{if(a[t].name===e){const e=a[t];At.userSpells.push(e)}}))}))}static badgesHandler(){if(!oa.userData||!At.achievementsCurrentStatus)return;const{badges:e}=oa.userData,t=Object.keys(At.achievementsCurrentStatus),a=[];if(t.forEach((e=>{At.achievementsCurrentStatus[e]&&a.push(ea.achievementsNums[e])})),"noData"===e)oa.userData.badges=la.setBadges(a);else{const t=la.getBadges(e);a.forEach((e=>{t.includes(e)||t.push(e)})),oa.userData.badges=la.setBadges(t)}}static uniqueBeastsCounter(){if(!At.currentGameBeasts)return 0;const e=At.currentGameBeasts,t=[];return e.forEach((e=>{!t.includes(e.beastType)&&e.done&&t.push(e.beastType)})),t.length}static setData(){if(!oa.userData)return;const e=oa.uniqueBeastsCounter(),t={firstMapRender:At.firstAppearance,firstFieldRender:At.firstFieldAppearance,userLvl:At.userLvl,userSpells:At.userSpells,uniqueBeasts:e,gameBeasts:At.currentGameBeasts,achievements:At.achievementsCurrentStatus},a=ra.setGameData(t);oa.badgesHandler();const n={_id:oa.userData._id,__v:oa.userData.__v,login:oa.userData.login,password:oa.userData.password,avatar:oa.userData.avatar,testing:oa.userData.testing,lessonsEn:oa.userData.lessonsEn,lessonsRu:oa.userData.lessonsRu,typingAdventure:a,typingHero:oa.userData.typingHero,badges:oa.userData.badges};Ee.updateUser(oa.userData._id,n)}}const ia=oa;class ca{static mapRender(){const e=yt.createElement(a.div,[{name:"class",value:"game-map"}]),t=ca.createMapButtons(),n=ca.mapBeastsRender();return e.append(t,...n),e}static mapBeastsRender(){return class{static createBeasts(e){const t=At.userLvl,a=Rt.createRandomNums(t,Ft.allBeastsTypes);for(let n=At.currentGameBeasts.length;n<t;n+=1){const t=a[n],s=n+1,r=At.lib.beastTitle[t],l=Rt.randomBeastHp(s),o=new Zt(r,s,l,e,!1);At.currentGameBeasts.push(o)}}}.createBeasts(ca.innerGameMapRender),At.currentGameBeasts.map((e=>e.createBeast()))}static innerGameMapRender(){const e=ca.mapRender();At.gameWrapper.innerHTML="",At.gameWrapper.append(e),ea.checker(),ia.setData()}static createMapButtons(){const e=yt.createElement(a.div,[{name:"class",value:"map-buttons-wrapper"}]),t=yt.createElement(a.btn,[{name:"class",value:"layout-button"}]),n=yt.createElement(a.btn,[{name:"class",value:"game-info-button"}]),s=yt.createElement(a.btn,[{name:"class",value:"reset-state-button"}]);return t.textContent=At.lib.layoutButton,s.textContent=At.lib.resetButton,n.textContent=At.lib.gameInfoTitle,t.addEventListener("click",(()=>{At.appCallbacks.switchPage(At.appCallbacks.page,At.appCallbacks.render),At.gameWrapper.remove()})),n.addEventListener("click",(()=>{aa.createInfoModal()})),s.addEventListener("click",(()=>{sa.resetMethod(ca.innerGameMapRender)})),e.append(t,n,s),e}}const ua=ca,da=class{};class pa{static getStep(){let e;return e=I.currentLessonFontSize===S.normal?C.normal:I.currentLessonFontSize===S.small?C.small:C.big,e}static check(){const e=rt.lessonChars[rt.inputIndex].getBoundingClientRect().top,t=rt.lessonChars[rt.inputIndex].getBoundingClientRect().bottom,a=rt.contentWrapper.getBoundingClientRect().top,n=rt.contentWrapper.getBoundingClientRect().bottom,s=pa.getStep();if(t>n){const e=parseInt(rt.charsWrapper.style.marginTop||"0px",10),a=t-n;rt.charsWrapper.style.marginTop=e-a-2*s+"px"}if(e<a){const t=parseInt(rt.charsWrapper.style.marginTop||"0px",10),n=a-e;rt.charsWrapper.style.marginTop=`${t+n+s}px`}}static adjust(){const e=rt.lessonChars[rt.inputIndex].getBoundingClientRect().top,t=rt.lessonChars[rt.inputIndex].getBoundingClientRect().bottom,a=rt.charsWrapper.getBoundingClientRect().top,n=rt.contentWrapper.getBoundingClientRect().top,s=rt.contentWrapper.getBoundingClientRect().bottom,r=pa.getStep();if(t>s-r){const e=parseInt(rt.charsWrapper.style.marginTop||"0px",10);rt.charsWrapper.style.marginTop=e-r+"px"}if(e<n+r&&a<n){const e=parseInt(rt.charsWrapper.style.marginTop||"0px",10);rt.charsWrapper.style.marginTop=`${e+r}px`}}}const ma=pa,ga=class{static create(e){const t=D.createElement(a.btn,[{name:"class",value:e}]);return e===I.currentLessonFontSize&&(t.classList.add("active-font-size-option"),da.fontSize=t),t.addEventListener("click",(()=>{da.fontSize&&da.fontSize.classList.remove("active-font-size-option"),da.fontSize=t,t.classList.add("active-font-size-option"),rt.contentWrapper.classList.remove(`lesson-${I.currentLessonFontSize}`),rt.contentWrapper.classList.add(`lesson-${e}`),I.currentLessonFontSize=e,"hidden"!==rt.contentWrapper.style.visibility&&ma.check(),P.saveState()})),t}},ha=class{static create(e){const t=D.createElement(a.btn,[{name:"class",value:e}]);return e===I.currentLessonFontFamily&&(t.classList.add("active-font-family-option"),da.fontFamily=t),t.addEventListener("click",(()=>{da.fontFamily&&da.fontFamily.classList.remove("active-font-family-option"),da.fontFamily=t,t.classList.add("active-font-family-option"),rt.contentWrapper.classList.remove(`lesson-${I.currentLessonFontFamily}`),rt.contentWrapper.classList.add(`lesson-${e}`),I.currentLessonFontFamily=e,P.saveState()})),t}};class va{static fillOptionPanel(e,t){const n=e,s=D.createElement(a.div,[{name:"class",value:"options-font"}]),r=D.createElement(a.div,[{name:"class",value:"options-font-size"}]),l=D.createElement(a.div,[{name:"class",value:"options-font-family"}]),o=ga.create(S.normal),i=ga.create(S.small),c=ga.create(S.big),u=ha.create(x.default),d=ha.create(x.serif);o.textContent="Aa",i.textContent="Aa",c.textContent="Aa",u.textContent="Font Sans Serif",d.textContent="Font Serif",l.append(u,d),r.append(i,o,c),s.append(r,l),n.classList.remove("hidden"),n.textContent="",n.append(s),t.classList.remove("hidden")}static createLessonFontBtn(e,t){const n=D.createElement(a.btn,[{name:"class",value:"lesson-font-btn"}]);return n.addEventListener("click",(()=>{if(n.classList.contains("active-option"))return n.classList.remove("active-option"),t.classList.add("hidden"),void e.classList.add("hidden");va.fillOptionPanel(e,t),da.option&&da.option.classList.remove("active-option"),da.option=n,da.option.classList.add("active-option")})),n}}const fa=va,ba=class{static create(e){const t=D.createElement(a.btn,[{name:"class",value:e}]);return e===I.currentLessonSound&&(t.classList.add("active-sound-option"),da.sound=t),t.addEventListener("click",(()=>{da.sound&&da.sound.classList.remove("active-sound-option"),da.sound=t,t.classList.add("active-sound-option"),I.currentLessonSound=e,P.saveState()})),t}};class wa{static fillOptionPanel(e,t){const n=e,s=D.createElement(a.div,[{name:"class",value:"options-sound"}]),r=ba.create(k.silent),l=ba.create(k.soft),o=ba.create(k.hard),i=ba.create(k.mech);r.textContent=W.lessonSoundSilent[I.currentLang],l.textContent=W.lessonSoundSoft[I.currentLang],o.textContent=W.lessonSoundHard[I.currentLang],i.textContent=W.lessonSoundMech[I.currentLang],s.append(r,l,o,i),n.textContent="",n.classList.remove("hidden"),n.append(s),t.classList.remove("hidden")}static createLessonSoundBtn(e,t){const n=D.createElement(a.btn,[{name:"class",value:"lesson-sound-btn"}]);return n.addEventListener("click",(()=>{if(n.classList.contains("active-option"))return n.classList.remove("active-option"),t.classList.add("hidden"),void e.classList.add("hidden");wa.fillOptionPanel(e,t),da.option&&da.option.classList.remove("active-option"),da.option=n,da.option.classList.add("active-option")})),n}}const ya=wa,La=class{static createBgOption(e){const t=D.createElement(a.btn,[{name:"class",value:e}]);return e===I.currentLessonBg&&(t.classList.add("active-bg-option"),da.bg=t),t.addEventListener("click",(()=>{da.bg&&da.bg.classList.remove("active-bg-option"),da.bg=t,t.classList.add("active-bg-option"),rt.page.classList.remove(`lesson-${I.currentLessonBg}`),rt.page.classList.add(`lesson-${e}`),I.currentLessonBg=e,P.saveState()})),t}};class Ea{static fillOptionPanel(e,t){const n=e,s=D.createElement(a.div,[{name:"class",value:"options-bg"}]),r=La.createBgOption(T.default),l=La.createBgOption(T.one),o=La.createBgOption(T.two);s.append(r,l,o),n.classList.remove("hidden"),n.textContent="",n.append(s),t.classList.remove("hidden")}static createLessonBgBtn(e,t){const n=D.createElement(a.btn,[{name:"class",value:"lesson-bg-btn"}]);return n.addEventListener("click",(()=>{if(n.classList.contains("active-option"))return n.classList.remove("active-option"),t.classList.add("hidden"),void e.classList.add("hidden");Ea.fillOptionPanel(e,t),da.option&&da.option.classList.remove("active-option"),da.option=n,da.option.classList.add("active-option")})),n}}const Ta=Ea,Sa=class{static createSkinOption(e){const t=D.createElement(a.btn,[{name:"class",value:e}]);return e===I.currentLessonSkin&&(t.classList.add("active-skin-option"),da.skin=t),t.addEventListener("click",(()=>{da.skin&&da.skin.classList.remove("active-skin-option"),da.skin=t,t.classList.add("active-skin-option"),rt.keyboard.classList.remove(`lesson-${I.currentLessonSkin}`),rt.keyboard.classList.add(`lesson-${e}`),I.currentLessonSkin=e,P.saveState()})),t}};class xa{static fillOptionPanel(e,t){const n=e,s=D.createElement(a.div,[{name:"class",value:"options-skin"}]),r=Sa.createSkinOption(B.default),l=Sa.createSkinOption(B.one),o=Sa.createSkinOption(B.two),i=Sa.createSkinOption(B.three);s.append(r,l,o,i),n.classList.remove("hidden"),n.textContent="",n.append(s),t.classList.remove("hidden")}static createLessonSkinBtn(e,t){const n=D.createElement(a.btn,[{name:"class",value:"lesson-skin-btn"}]);return n.addEventListener("click",(()=>{if(n.classList.contains("active-option"))return n.classList.remove("active-option"),t.classList.add("hidden"),void e.classList.add("hidden");xa.fillOptionPanel(e,t),da.option&&da.option.classList.remove("active-option"),da.option=n,da.option.classList.add("active-option")})),n}}const Ca=xa,ka=[[{type:"Symbol",downEng:"`",upEng:"~",downRu:"ё"},{type:"Symbol",downEng:"1",upEng:"!",downRu:"1",upRu:"!"},{type:"Symbol",downEng:"2",upEng:"@",downRu:"2",upRu:'"'},{type:"Symbol",downEng:"3",upEng:"#",downRu:"3",upRu:"№"},{type:"Symbol",downEng:"4",upEng:"$",downRu:"4",upRu:";"},{type:"Symbol",downEng:"5",upEng:"%",downRu:"5",upRu:"%"},{type:"Symbol",downEng:"6",upEng:"^",downRu:"6",upRu:":"},{type:"Symbol",downEng:"7",upEng:"&",upRu:"?",downRu:"7"},{type:"Symbol",downEng:"8",upEng:"*",downRu:"8",upRu:"*"},{type:"Symbol",downEng:"9",upEng:"(",downRu:"9",upRu:"("},{type:"Symbol",downEng:"0",upEng:")",downRu:"0",upRu:")"},{type:"Symbol",downEng:"-",upEng:"_",downRu:"-",upRu:"_"},{type:"Symbol",downEng:"=",upEng:"+",downRu:"=",upRu:"+"},{type:"Function",down:"Backspace",specialSize:1}],[{type:"Function",down:"Tab",specialSize:1},{type:"Symbol",downEng:"q",downRu:"й",letter:!0},{type:"Symbol",downEng:"w",downRu:"ц",letter:!0},{type:"Symbol",downEng:"e",downRu:"у",letter:!0},{type:"Symbol",downEng:"r",downRu:"к",letter:!0},{type:"Symbol",downEng:"t",downRu:"е",letter:!0},{type:"Symbol",downEng:"y",downRu:"н",letter:!0},{type:"Symbol",downEng:"u",downRu:"г",letter:!0},{type:"Symbol",downEng:"i",downRu:"ш",letter:!0},{type:"Symbol",downEng:"o",downRu:"щ",letter:!0},{type:"Symbol",downEng:"p",downRu:"з",letter:!0},{type:"Symbol",upEng:"{",downEng:"[",downRu:"х"},{type:"Symbol",downEng:"]",downRu:"ъ",upEng:"}"},{type:"Symbol",downEng:"\\",downRu:"\\",upEng:"|",upRu:"/"}],[{type:"Function",down:"CapsLock",specialSize:2},{type:"Symbol",downEng:"a",downRu:"ф",letter:!0},{type:"Symbol",downEng:"s",downRu:"ы",letter:!0},{type:"Symbol",downEng:"d",downRu:"в",letter:!0},{type:"Symbol",downEng:"f",downRu:"а",letter:!0},{type:"Symbol",downEng:"g",downRu:"п",letter:!0},{type:"Symbol",downEng:"h",downRu:"р",letter:!0},{type:"Symbol",downEng:"j",downRu:"о",letter:!0},{type:"Symbol",downEng:"k",downRu:"л",letter:!0},{type:"Symbol",downEng:"l",downRu:"д",letter:!0},{type:"Symbol",downEng:";",downRu:"ж",upEng:":"},{type:"Symbol",upEng:"'",downEng:"'",downRu:"э"},{type:"Function",down:"Enter",specialSize:1}],[{type:"Function",down:"Shift",specialSize:3},{type:"Symbol",downEng:"z",downRu:"я",letter:!0},{type:"Symbol",downEng:"x",downRu:"ч",letter:!0},{type:"Symbol",downEng:"c",downRu:"с",letter:!0},{type:"Symbol",downEng:"v",downRu:"м",letter:!0},{type:"Symbol",downEng:"b",downRu:"и",letter:!0},{type:"Symbol",downEng:"n",downRu:"т",letter:!0},{type:"Symbol",downEng:"m",downRu:"ь",letter:!0},{code:"Comma",type:"Symbol",downEng:",",downRu:"б",upEng:"<"},{code:"Period",type:"Symbol",downEng:".",downRu:"ю",upEng:">"},{type:"Symbol",downEng:"/",downRu:".",upEng:"?",upRu:","},{type:"Function",down:"Shift",specialSize:2}],[{type:"Function",down:"Ctrl",specialSize:2},{type:"Function",down:"Alt",specialSize:2},{type:"Function",down:"",specialSize:4},{type:"Function",down:"Alt",specialSize:2},{type:"Function",down:"Ctrl",specialSize:3}]];class Ba{static createKey(e,t){const n=D.createElement(a.span);n.textContent=t,e.append(n)}static createLessonKeyboard(){const e=D.createElement(a.div,[{name:"class",value:`lesson-keyboard lesson-${I.currentLessonSkin}`}]);return ka.forEach((t=>{const n=D.createElement(a.div,[{name:"class",value:"keyboard-row"}]);t.forEach((e=>{const t=D.createElement(a.div,[{name:"class",value:"keyboard-key"}]);if("Function"===e.type&&(t.classList.add("key-function"),t.textContent=`${e.down}`),e.specialSize)switch(e.specialSize){case 1:t.classList.add("key-size-one-half");break;case 2:t.classList.add("key-size-double");break;case 3:t.classList.add("key-size-two-half"),"Shift"===e.down&&(Ba.shift=t);break;default:t.classList.add("key-size-space"),Ba.space=t}"Symbol"===e.type&&(I.currentLayout===u.en?(e.upEng&&(Ba.createKey(t,e.upEng),Ba.virtualKeys[e.upEng]=t),e.downEng&&(Ba.createKey(t,e.downEng),Ba.virtualKeys[e.downEng]=t),e.upEng&&e.downEng&&t.classList.add("key-two-symbols")):(e.upRu&&(Ba.createKey(t,e.upRu),Ba.virtualKeys[e.upRu]=t),e.downRu&&(Ba.createKey(t,e.downRu),Ba.virtualKeys[e.downRu]=t),e.upRu&&e.downRu&&t.classList.add("key-two-symbols"))),e.letter&&t.classList.add("key-letter"),n.append(t)})),e.append(n)})),e}}Ba.virtualKeys={};const Ma=Ba;class Ia{static create(e,t){const n=D.createElement(a.div,[{name:"class",value:"lesson-badge"}]),s=D.createElement(a.img,[{name:"src",value:`./assets/images/badges/badge-${e}.svg`},{name:"alt",value:"Badge Image"},{name:"height",value:"80px"},{name:"width",value:"80px"}]),r=D.createElement(a.div,[{name:"class",value:"lesson-badge-text"}]),l=D.createElement(a.par,[{name:"class",value:"lesson-badge-title"}]),o=D.createElement(a.par,[{name:"class",value:"lesson-badge-content"}]);return l.textContent=W.lessonBadgeTitle[I.currentLang],o.textContent=t,r.append(l,o),n.append(s,r),n}static checkCompletedBadges(e,t){const a=ot.getAllLessons(rt.user),n=Object.values(a).filter((e=>0===e.lastScore)).length;return Object.keys(a).length!==rt.lessonsNumber||n||(I.currentLayout===u.en?e.includes(E.twelve)||(t.append(Ia.create(E.twelve,W.lessonBadgeCompletedAllLessons[I.currentLang])),e.push(E.twelve),e.includes(E.thirteen)&&(t.append(Ia.create(E.twenty,W.lessonBadgeEyesUp[I.currentLang])),e.push(E.twenty))):e.includes(E.thirteen)||(t.append(Ia.create(E.thirteen,W.lessonBadgeCompletedAllLessons[I.currentLang])),e.push(E.thirteen),e.includes(E.twelve)&&(t.append(Ia.create(E.twenty,W.lessonBadgeEyesUp[I.currentLang])),e.push(E.twenty)))),e}static checkSpeedBadges(e,t){return rt.accuracy>=90&&rt.speed>=20&&(I.currentLayout===u.en?e.includes(E.fourteen)||(t.append(Ia.create(E.fourteen,W.lessonBadgeSpeed20[I.currentLang])),e.push(E.fourteen)):e.includes(E.fifteen)||e.includes(E.fifteen)||(t.append(Ia.create(E.fifteen,W.lessonBadgeSpeed20[I.currentLang])),e.push(E.fifteen)),rt.speed>=60&&(I.currentLayout===u.en?e.includes(E.sixteen)||(t.append(Ia.create(E.sixteen,W.lessonBadgeSpeed60[I.currentLang])),e.push(E.sixteen)):e.includes(E.seventeen)||e.includes(E.seventeen)||(t.append(Ia.create(E.seventeen,W.lessonBadgeSpeed60[I.currentLang])),e.push(E.seventeen))),rt.speed>=100&&(I.currentLayout===u.en?e.includes(E.eighteen)||(t.append(Ia.create(E.eighteen,W.lessonBadgeSpeed100[I.currentLang])),e.push(E.eighteen)):e.includes(E.nineteen)||e.includes(E.nineteen)||(t.append(Ia.create(E.nineteen,W.lessonBadgeSpeed100[I.currentLang])),e.push(E.nineteen)))),e}static checkBadges(){let e=[];const t=D.createElement(a.div,[{name:"class",value:"lesson-badges-wrapper"}]);return rt.user.badges!==w.noData&&(e=la.getBadges(rt.user.badges)),e=Ia.checkCompletedBadges(e,t),e=Ia.checkSpeedBadges(e,t),rt.user.badges=la.setBadges(e),t}}const Aa=Ia;class Pa{static getScore(){let e;const t=Math.floor((rt.accuracy-rt.lessonData.minAccuracy)/((100-rt.lessonData.minAccuracy)/5)),a=Math.floor(rt.speed/rt.lessonData.starSpeed);return e=t+a>5?5:t+a,(rt.accuracy<rt.lessonData.minAccuracy||rt.speed<rt.lessonData.minSpeed)&&(e=0),e}static saveResult(){const e={lastSpeed:rt.speed,lastAccuracy:rt.accuracy,lastScore:Pa.getScore()},t=ot.getAllLessons(rt.user);t[rt.lessonData.index]=e;const a=lt.setLessons(t);I.currentLayout===u.en?rt.user.lessonsEn=a:rt.user.lessonsRu=a,rt.page.append(Aa.checkBadges());const n=new Te(rt.user.login,rt.user.password,rt.user.avatar,rt.user.testing,rt.user.lessonsEn,rt.user.lessonsRu,rt.user.typingAdventure,rt.user.typingHero,rt.user.badges);Ee.updateUser(rt.user._id,n)}static createAccuracyReq(){const e=D.createElement(a.span,[{name:"class",value:"lesson-result-accuracy-wrapper"}]),t=D.createElement(a.span,[{name:"class",value:"lesson-result-accuracy"}]),n=D.createElement(a.span,[{name:"class",value:"lesson-result-accuracy-num"}]);return t.textContent=W.lessonResultsReqAccuracy[I.currentLang],n.textContent=`${rt.lessonData.minAccuracy}%`,e.append(t,n),e}static createSpeedReq(){const e=D.createElement(a.span,[{name:"class",value:"lesson-result-speed-wrapper"}]),t=D.createElement(a.span,[{name:"class",value:"lesson-result-speed"}]),n=D.createElement(a.span,[{name:"class",value:"lesson-result-speed-num"}]);return t.textContent=W.lessonResultsReqSpeed[I.currentLang],n.textContent=`${rt.lessonData.minSpeed}${W.testWpmSub[I.currentLang]}`,e.append(t,n),e}static createSpeedStarReq(){const e=D.createElement(a.span,[{name:"class",value:"lesson-result-speed-star-wrapper"}]),t=D.createElement(a.span,[{name:"class",value:"lesson-result-speed-star"}]),n=D.createElement(a.span,[{name:"class",value:"lesson-result-speed-star-num"}]);return t.textContent=W.lessonResultsReqSpeedStar[I.currentLang],n.textContent=`${rt.lessonData.starSpeed}${W.testWpmSub[I.currentLang]}`,e.append(t,n),e}static createLessonResult(){const e=D.createElement(a.div,[{name:"class",value:"lesson-result"}]),t=D.createElement(a.h5,[{name:"class",value:"lesson-result-title"}]),n=D.createElement(a.span,[{name:"class",value:"lesson-result-score-text"}]),s=D.createElement(a.div,[{name:"class",value:"lesson-score"}]),r=D.createElement(a.div,[{name:"class",value:"lesson-score-wrapper"}]),l=Pa.getScore(),o=D.createElement(a.h5,[{name:"class",value:"lesson-result-req"}]),i=Pa.createAccuracyReq(),c=Pa.createSpeedReq(),u=Pa.createSpeedStarReq();if(5-l)for(let e=0;e<5-l;e+=1){const e=D.createElement(a.div,[{name:"class",value:"lesson-btn-star-empty"}]);s.append(e)}for(let e=0;e<l;e+=1){const e=D.createElement(a.div,[{name:"class",value:"lesson-btn-star"}]);s.append(e)}switch(l){case 1:t.textContent=W.lessonResults1[I.currentLang];break;case 2:t.textContent=W.lessonResults2[I.currentLang];break;case 3:t.textContent=W.lessonResults3[I.currentLang];break;case 4:t.textContent=W.lessonResults4[I.currentLang];break;case 5:t.textContent=W.lessonResults5[I.currentLang];break;default:t.textContent=W.lessonResults0[I.currentLang]}return o.textContent=W.lessonResultsReq[I.currentLang],n.textContent=W.lessonResultsScoreText[I.currentLang],r.append(n,s),e.append(t,r,o,i,c,u),e}static showLessonResult(){rt.contentWrapper.style.visibility="hidden",rt.keyboard.style.visibility="hidden",rt.hands.style.visibility="hidden",rt.page.append(Pa.createLessonResult()),V.checkIfUserAuthorised()&&Pa.saveResult()}}const Ra=Pa,$a={ё:"apostrophe",й:"q",ц:"w",у:"e",к:"r",е:"t",н:"y",г:"u",ш:"i",щ:"o",з:"p",х:"left-bracket",ъ:"right-bracket",ф:"a",ы:"s",в:"d",а:"f",п:"g",р:"h",о:"j",л:"k",д:"l",ж:"semicolon",э:"single-quote",я:"z",ч:"x",с:"c",м:"v",и:"b",т:"n",ь:"m",б:"comma",ю:"dot"};class Da{static checkMatch(e){if(rt.lessonChars[rt.inputIndex].textContent===e)if(rt.historyMistakes.includes(rt.inputIndex)){rt.lessonChars[rt.inputIndex].classList.add("correction");const e=rt.mistakes.indexOf(rt.inputIndex);e>-1&&rt.mistakes.splice(e,1)}else rt.lessonChars[rt.inputIndex].classList.add("correct");else rt.mistakes.includes(rt.inputIndex)||rt.mistakes.push(rt.inputIndex),rt.historyMistakes.includes(rt.inputIndex)||rt.historyMistakes.push(rt.inputIndex),rt.lessonChars[rt.inputIndex].classList.add("incorrect")}static getCorrections(){return Math.floor(rt.historyMistakes.length-rt.mistakes.length)}static getAccuracy(){const e=rt.typedChars+1-rt.mistakes.length,t=rt.historyMistakes.length-rt.mistakes.length,a=Math.floor((e-t/2)/(rt.typedChars+1)*100);return rt.accuracy=a,a}static hideRibbon(){rt.ribbon.style.top="-5rem"}static highlightKey(e){if(e<rt.lessonChars.length){let t=rt.lessonChars[e].textContent;" "===t?Ma.space.classList.add("current-char"):(t===t.toLocaleUpperCase()&&t.match(/[a-zA-Zа-яА-Я]/)&&Ma.shift.classList.add("current-char"),t=t.toLocaleLowerCase(),Ma.virtualKeys[t].classList.add("current-char"))}}static removeKeyHighlight(e){if(e<rt.lessonChars.length){let t=rt.lessonChars[e].textContent;" "===t?Ma.space.classList.remove("current-char"):(t===t.toLocaleUpperCase()&&t.match(/[a-zA-Zа-яА-Я]/)&&Ma.shift.classList.remove("current-char"),t=t.toLocaleLowerCase(),Ma.virtualKeys[t].classList.remove("current-char"))}}static turnOnSound(){if(I.currentLessonSound===k.silent)return;let e=new Audio(`./assets/audio/${k.soft}.wav`);I.currentLessonSound===k.hard&&(e=new Audio(`./assets/audio/${k.hard}.wav`)),I.currentLessonSound===k.mech&&(e=new Audio(`./assets/audio/${k.mech}.wav`)),e.currentTime=0,e.play()}static addHands(){rt.lessonData.complexity===c.hard&&rt.hands.classList.add("hidden");const e=rt.lessonChars[rt.inputIndex].textContent;e.match(/[а-яА-ЯЁё]/)?rt.hands.setAttribute("src",`./assets/images/hands/hand-${$a[e.toLocaleLowerCase()]}.svg`):e.match(/[a-zA-Z]/)?rt.hands.setAttribute("src",`./assets/images/hands/hand-${e.toLocaleLowerCase()}.svg`):e.match(/\d/)?rt.hands.setAttribute("src",`./assets/images/hands/hand-${e}.svg`):"`"===e||"~"===e?rt.hands.setAttribute("src","./assets/images/hands/hand-apostrophe.svg"):"'"===e||'"'===e?rt.hands.setAttribute("src","./assets/images/hands/hand-single-quote.svg"):"\\"===e||"|"===e?rt.hands.setAttribute("src","./assets/images/hands/hand-back-slash.svg"):"-"===e||"_"===e?rt.hands.setAttribute("src","./assets/images/hands/hand-dash.svg"):","===e||"<"===e?rt.hands.setAttribute("src","./assets/images/hands/hand-comma.svg"):"/"===e||"?"===e?rt.hands.setAttribute("src","./assets/images/hands/hand-slash.svg"):"="===e||"+"===e?rt.hands.setAttribute("src","./assets/images/hands/hand-equality.svg"):"["===e||"{"===e?rt.hands.setAttribute("src","./assets/images/hands/hand-left-bracket.svg"):"]"===e||"}"===e?rt.hands.setAttribute("src","./assets/images/hands/hand-right-bracket.svg"):";"===e||":"===e?rt.hands.setAttribute("src","./assets/images/hands/hand-semicolon.svg"):" "===e?rt.hands.setAttribute("src","./assets/images/hands/hand-space.svg"):">"===e?rt.hands.setAttribute("src","./assets/images/hands/hand-dot.svg"):"."===e&&(I.currentLayout===u.en?rt.hands.setAttribute("src","./assets/images/hands/hand-dot.svg"):rt.hands.setAttribute("src","./assets/images/hands/hand-slash.svg"))}static createLessonInput(){const e=D.createElement(a.input,[{name:"class",value:"lesson-input"},{name:"autocomplete",value:"off"}]);return rt.lessonChars[0].classList.add("active-char"),Da.highlightKey(0),Da.addHands(),e.addEventListener("input",(()=>{if(Da.turnOnSound(),rt.inputIndex<rt.lessonChars.length&&rt.lessonChars[rt.inputIndex].classList.remove("active-char"),Da.removeKeyHighlight(rt.inputIndex),rt.inputIndex>=rt.lessonChars.length)return;const t=e.value.split("")[rt.inputIndex];if(t&&Da.highlightKey(rt.inputIndex+1),rt.inputIndex||Da.hideRibbon(),ma.adjust(),rt.typedChars=rt.typedChars>rt.inputIndex?rt.typedChars:rt.inputIndex,rt.typing||(gt.stopTimer=!1,rt.typing=!0,gt.startTimer()),null==t)return rt.inputIndex&&(rt.inputIndex-=1),Da.highlightKey(rt.inputIndex),rt.lessonChars[rt.inputIndex].classList.remove("correct","incorrect","correction"),rt.lessonChars[rt.inputIndex].classList.add("active-char"),void Da.addHands();Da.checkMatch(t),rt.wpmCount.textContent=`${gt.getWpm()} ${W.testWpmSub[I.currentLang]}`,rt.correctionsCount.textContent=`${Da.getCorrections()}`,rt.accuracyCount.textContent=`${Da.getAccuracy()} %`,rt.mistakesCount.textContent=`${rt.mistakes.length}`,rt.inputIndex===rt.lessonChars.length-1&&(gt.stopTimer=!0,Ra.showLessonResult()),rt.inputIndex+=1,rt.inputIndex<rt.lessonChars.length&&(Da.addHands(),rt.lessonChars[rt.inputIndex].classList.add("active-char"))})),e}}const Ha=Da,Fa=class{static createAboutDesc(e,t,n){const s=D.createElement(a.div,[{name:"class",value:"about-desc"}]),r=D.createElement(a.par,[{name:"class",value:"about-text"}]),l=D.createElement(a.span),o=D.createElement(a.link,[{name:"class",value:"about-link"},{name:"href",value:n},{name:"target",value:"_blank"}]);return l.textContent=e,o.textContent=t,r.append(l,o),s.append(r),s}},Ua=class{static createTechDesc(e,t){const n=D.createElement(a.div,[{name:"class",value:"about-desc"}]),s=D.createElement(a.par,[{name:"class",value:"about-text"}]),r=D.createElement(a.span),l=D.createElement(a.span,[{name:"class",value:"about-link"}]);return r.innerHTML=e,l.textContent=t,s.append(r,l),n.append(s),n}},Wa={greeting:{en:"Hello everyone!",ru:"Всем привет!"},project:{en:"The project was created as a final task of the Rolling Scopes School front-end development course. The working process and the full feature list of our application can be found by the ",ru:"Проект был создан в рамках финального задания курса front-end разработки Rolling Scopes School. С ходом работ и полным списком особенностей нашего приложения можно ознакомиться по "},features:{en:"link.",ru:"ссылке."},technologies:{en:"Technologies",ru:"Технологии"},textFront:{en:"Technologies used for front-end: ",ru:"Использованые front-end технологии: "},textBack:{en:"Technologies used for back-end: ",ru:"Использованые back-end технологии: "},techFront:{en:"HTML, SCSS, TypeScript",ru:"HTML, SCSS, TypeScript"},techBack:{en:"NodeJS, Express, Mongoose, MongoDB, Heroku",ru:"NodeJS, Express, Mongoose, MongoDB, Heroku"},developers:{en:"Developers",ru:"Разработчики"},nameOxana:{en:"Oxana",ru:"Оксана"},taskOneOxana:{en:"design",ru:"дизайн"},taskTwoOxana:{en:"tests/lessons content",ru:"содержимое тестов/уроков"},taskThreeOxana:{en:"layout: home, lessons layout choice, list of lessons, test, lesson, games choice",ru:"верстка: главная, выбор раскладки для уроков, список уроков, тест, урок, выбор игр"},taskFourOxana:{en:"logic: test, lesson, lesson customization",ru:"логика: тест, урок, кастомизация урока"},taskFiveOxana:{en:"back-end development",ru:"разработка back-end"},nameNikita:{en:"Nikita",ru:"Никита"},taskOneNikita:{en:"games concepts",ru:"концепты игр"},taskTwoNikita:{en:"layout: footer, Typing Adventure game, Typing Hero game",ru:"верстка: подвал, игра Typing Adventure, игра Typing Hero"},taskThreeNikita:{en:"logic: Typing Adventure game, Typing Hero game",ru:"логика: игра Typing Adventure, игра Typing Hero"},taskFourNikita:{en:"back-end deploy",ru:"развертывание back-end"},nameIrina:{en:"Irina",ru:"Ирина"},taskOneIrina:{en:'layout: header, modal windows, "About Us"',ru:'верстка: шапка, модальные окна, "О нас"'},taskTwoIrina:{en:"logic: registration/authorization, data change/logout/profile deletion, display of statistics/badges in a profile",ru:"логика: регистрация/авторизация, смена данных/выход/удаление профиля, отображение статистики/достижений в профиле"},taskThreeIrina:{en:"work with local storage",ru:"работа с local storage"},taskFourIrina:{en:"back-end development",ru:"разработка back-end"},credits:{en:"Credits",ru:"Благодарности"},inspyredBy:{en:"The idea was taken from ",ru:"Идея проекта взята с сайта "},typingClub:{en:"TypingClub",ru:"TypingClub"},illustrationsBy:{en:"All illustrations are created by ",ru:"Все иллюстрации созданы "},and:{en:" and ",ru:" и "},illustratorOne:{en:"Spectrum UI",ru:"Spectrum UI"},illustratorTwo:{en:"Alzea Arafat",ru:"Alzea Arafat"}},Oa=class{static createDevTask(e){const t=D.createElement(a.listItem,[{name:"class",value:"about-dev-task"}]);return t.textContent=e,t}},Na=class{static createDevDesc(e){const t=D.createElement(a.div,[{name:"class",value:"about-dev"}]),n=class{static createDevAvatar(e){const t=D.createElement(a.div,[{name:"class",value:"about-dev-avatar-wrapper"}]),n=D.createElement(a.img,[{name:"class",value:"about-dev-avatar-image"},{name:"src",value:e},{name:"alt",value:"Developer avatar"}]);return t.append(n),t}}.createDevAvatar(e.avatar),s=class{static createDevTitle(e){const t=D.createElement(a.h5,[{name:"class",value:"about-dev-title"}]);return t.textContent=e,t}}.createDevTitle(Wa[`name${e.name}`][I.currentLang]),r=class{static createDevTasks(e){const t=D.createElement(a.list,[{name:"class",value:"about-dev-tasks"}]),n=Oa.createDevTask(Wa[`taskOne${e}`][I.currentLang]),s=Oa.createDevTask(Wa[`taskTwo${e}`][I.currentLang]),r=Oa.createDevTask(Wa[`taskThree${e}`][I.currentLang]),l=Oa.createDevTask(Wa[`taskFour${e}`][I.currentLang]);if(t.append(n,s,r,l),`taskFive${e}`in Wa){const a=Oa.createDevTask(Wa[`taskFive${e}`][I.currentLang]);t.append(n,s,r,l,a)}return t}}.createDevTasks(e.name);return t.append(n,s,r),t}};class Ga{static renderInteractivePage(){const e=t.getPage();let n;switch(I.currentPage){case s.lesson:n=class{static createLessonMain(e){let t;if(!rt.lessonData)return I.currentPage=s.lessons,t=vt.createLessonsMain(e),t;t=D.createElement(a.main,[{name:"class",value:`lesson lesson-${I.currentLessonBg}`}]),rt.page=t;const n=D.createElement(a.div,[{name:"class",value:"lesson-top"}]),r=ht.createBackBtn(s.lessons,e),l=class{static createLessonSettings(){const e=D.createElement(a.div,[{name:"class",value:"lesson-settings"}]),t=D.createElement(a.div,[{name:"class",value:"options-panel hidden"}]),n=class{static create(e){const t=D.createElement(a.div,[{name:"class",value:"options-panel-overlay hidden"}]),n=e;return rt.page.append(t),t.addEventListener("click",(()=>{t.classList.add("hidden"),n.textContent="",n.classList.add("hidden"),da.option.classList.remove("active-option")})),t}}.create(t),s=fa.createLessonFontBtn(t,n),r=ya.createLessonSoundBtn(t,n),l=Ta.createLessonBgBtn(t,n),o=Ca.createLessonSkinBtn(t,n);return e.append(s,r,o,l,t),e}}.createLessonSettings(),o=D.createElement(a.div,[{name:"class",value:"lesson-ribbon"}]),i=D.createElement(a.div,[{name:"class",value:"lesson-wrapper"}]),c=D.createElement(a.div,[{name:"class",value:"content-top-wrapper"}]),u=class{static createLessonStats(){const e=D.createElement(a.div,[{name:"class",value:"lesson-stats"}]),t=D.createElement(a.div,[{name:"class",value:"test-mistakes-wrapper"}]),n=D.createElement(a.par,[{name:"class",value:"test-mistakes"}]),s=D.createElement(a.span,[{name:"class",value:"test-mistakes-count"}]),r=D.createElement(a.div,[{name:"class",value:"test-corrections-wrapper"}]),l=D.createElement(a.par,[{name:"class",value:"test-corrections"}]),o=D.createElement(a.span,[{name:"class",value:"test-corrections-count"}]),i=D.createElement(a.div,[{name:"class",value:"lesson-wpm-wrapper"}]),c=D.createElement(a.par,[{name:"class",value:"lesson-wpm"}]),u=D.createElement(a.span,[{name:"class",value:"lesson-wpm-count"}]),d=D.createElement(a.div,[{name:"class",value:"lesson-accuracy-wrapper"}]),p=D.createElement(a.par,[{name:"class",value:"lesson-accuracy"}]),m=D.createElement(a.span,[{name:"class",value:"lesson-accuracy-count"}]);return rt.mistakesCount=s,rt.correctionsCount=o,rt.wpmCount=u,rt.accuracyCount=m,l.textContent=W.testCorrectionsText[I.currentLang],n.textContent=W.testMistakesText[I.currentLang],c.textContent=W.testWpmText[I.currentLang],p.textContent=W.testAccuracyText[I.currentLang],s.textContent="0",o.textContent="0",u.textContent="0",m.textContent="0",t.append(n,s),r.append(l,o),i.append(c,u),d.append(p,m),e.append(t,r,i,d),e}}.createLessonStats(),d=class{static createRestartBtn(e){const t=D.createElement(a.btn,[{name:"class",value:"lesson-restart-btn"}]);return t.addEventListener("click",(()=>{rt.clearState(),gt.stopTimer=!0,F.applyPage(s.lesson,e)})),t}}.createRestartBtn(e),p=class{static createLessonContent(){const e=D.createElement(a.div,[{name:"class",value:`lesson-content lesson-${I.currentLessonFontSize} lesson-${I.currentLessonFontFamily}`}]),t=[],n=D.createElement(a.div,[{name:"class",value:"chars-wrapper"}]);return rt.lessonData.content.split("").forEach((e=>{const s=D.createElement(a.span,[{name:"class",value:"lesson-char"}]);s.textContent=e,t.push(s),n.append(s)})),e.append(n),rt.lessonChars=t,rt.charsWrapper=n,rt.contentWrapper=e,e}}.createLessonContent(),m=Ma.createLessonKeyboard(),g=D.createElement(a.img,[{name:"class",value:"lesson-hands"},{name:"alt",value:"Hands tip"},{name:"height",value:"500px"},{name:"width",value:"850px"}]);rt.hands=g;const h=Ha.createLessonInput();return o.textContent=W.testRibbonText[I.currentLang],rt.ribbon=o,rt.keyboard=m,n.append(r,l),c.append(u,d),i.append(c,p,h),t.append(n,o,i,m,g),document.addEventListener("keydown",(()=>{h.focus()})),t}}.createLessonMain(Ga.renderPage);break;case s.test:n=class{static createTestMain(e){ut.clearState(),pt.stopTimer=!0;const t=D.createElement(a.main,[{name:"class",value:"test"}]),n=D.createElement(a.div,[{name:"class",value:"test-top"}]),l=ht.createBackBtn(s.layout,e),o=D.createElement(a.div,[{name:"class",value:"test-btns"}]),i=D.createElement(a.par,[{name:"class",value:"test-btns-text"}]),c=ft.createTestLangBtn(r.en,e),u=ft.createTestLangBtn(r.ru,e);return i.textContent=W.testBtnsText[I.currentLang],o.append(c,u),n.append(l,i,o),t.append(n),Ee.getTest(ut.lang).then((n=>{t.append(class{static createTestText(e,t){const n=D.createElement(a.div,[{name:"class",value:"test-text-wrapper"}]),r=[],l=D.createElement(a.div,[{name:"class",value:"test-text"}]),o=D.createElement(a.div,[{name:"class",value:"test-spans-wrapper"}]);e.split("").forEach((e=>{const t=D.createElement(a.span,[{name:"class",value:"char"}]);t.textContent=e,r.push(t),o.append(t)}));const i=class{static createTestInteraction(e,t,n){const r=D.createElement(a.div,[{name:"class",value:"test-results"}]),l=D.createElement(a.div,[{name:"class",value:"test-stats"}]),o=D.createElement(a.div,[{name:"class",value:"test-mistakes-wrapper"}]),i=D.createElement(a.par,[{name:"class",value:"test-mistakes"}]),c=D.createElement(a.span,[{name:"class",value:"test-mistakes-count"}]),u=D.createElement(a.div,[{name:"class",value:"test-corrections-wrapper"}]),d=D.createElement(a.par,[{name:"class",value:"test-corrections"}]),p=D.createElement(a.span,[{name:"class",value:"test-corrections-count"}]),m=D.createElement(a.div,[{name:"class",value:"test-wpm-wrapper"}]),g=D.createElement(a.par,[{name:"class",value:"test-wpm"}]),h=D.createElement(a.span,[{name:"class",value:"test-wpm-count"}]),v=D.createElement(a.div,[{name:"class",value:"test-accuracy-wrapper"}]),f=D.createElement(a.par,[{name:"class",value:"test-accuracy"}]),b=D.createElement(a.span,[{name:"class",value:"test-accuracy-count"}]),w=class{static createTestRestartBtn(e){const t=D.createElement(a.btn,[{name:"class",value:"test-restart"}]);return t.addEventListener("click",(()=>{ut.clearState(),pt.stopTimer=!0,wt.visible=!1,F.applyPage(s.test,e)})),t}}.createTestRestartBtn(n),y=D.createElement(a.div,[{name:"class",value:"test-ribbon"}]),L=class{static createTestInput(e,t,n){const s=D.createElement(a.input,[{name:"class",value:"test-input"},{name:"autocomplete",value:"off"}]),[r,l,o,i,c]=n;return s.addEventListener("input",(()=>{if(ut.charIndex<=e.length-1&&e[ut.charIndex].classList.remove("active-char"),ut.charIndex>e.length-1)return;(class{static adjust(e,t){const a=t;if(e.getBoundingClientRect().bottom>480){const e=parseInt(a.style.marginTop||"0px",10);a.style.marginTop=e-40+"px"}if(e.getBoundingClientRect().top<290&&a.getBoundingClientRect().top<250){const e=parseInt(a.style.marginTop||"0px",10);a.style.marginTop=`${e+40}px`}}}).adjust(e[ut.charIndex],t),0===ut.charIndex&&(r.style.top="-5rem"),ut.typedChars=ut.typedChars>ut.charIndex?ut.typedChars:ut.charIndex;const a=s.value.split("")[ut.charIndex];if(ut.Typing||(pt.stopTimer=!1,ut.Typing=!0,pt.startTimer()),null==a)return ut.charIndex&&(ut.charIndex-=1),void e[ut.charIndex].classList.remove("correct","incorrect","correction");if(e[ut.charIndex].textContent===a)if(ut.historyMistakes.includes(ut.charIndex)){e[ut.charIndex].classList.add("correction");const t=ut.mistakes.indexOf(ut.charIndex);t>-1&&ut.mistakes.splice(t,1)}else e[ut.charIndex].classList.add("correct");else ut.mistakes.includes(ut.charIndex)||ut.mistakes.push(ut.charIndex),ut.historyMistakes.includes(ut.charIndex)||ut.historyMistakes.push(ut.charIndex),e[ut.charIndex].classList.add("incorrect");" "!==e[ut.charIndex].textContent&&ut.charIndex!==e.length-1||(ut.words+=1,i.textContent=`${pt.getWpm()} ${W.testWpmSub[I.currentLang]}`),ut.charIndex===e.length-1&&(pt.stopTimer=!0,wt.showTestResult(i)),o.textContent=`${Math.floor(ut.getCorrections())}`,c.textContent=`${Math.floor(ut.getAccuracy())} %`,l.textContent=`${ut.mistakes.length}`,ut.charIndex+=1,ut.charIndex<=e.length-1&&e[ut.charIndex].classList.add("active-char"),pt.getTime()>60&&wt.showTestResult(i)})),s}}.createTestInput(e,t,[y,c,p,h,b]);return d.textContent=W.testCorrectionsText[I.currentLang],y.textContent=W.testRibbonText[I.currentLang],i.textContent=W.testMistakesText[I.currentLang],g.textContent=W.testWpmText[I.currentLang],f.textContent=W.testAccuracyText[I.currentLang],c.textContent="0",p.textContent="0",h.textContent="0",b.textContent="0",o.append(i,c),u.append(d,p),m.append(g,h),v.append(f,b),l.append(o,u,m,v),r.append(L,l,w,y),document.addEventListener("keydown",(()=>{L.focus()})),r}}.createTestInteraction(r,o,t);return document.addEventListener("keydown",(()=>{i.focus()})),l.append(o),n.append(i,l),n}}.createTestText(n[0].text,e))})),t}}.createTestMain(Ga.renderPage);break;case s.gameOne:n=class{static start(e,t,n){const s={page:e,switchPage:t,render:n},r=yt.createElement(a.div,[{name:"class",value:"game-wrapper"}]);if(At.gameWrapper=r,Lt.currentUser.login!==Lt.notAuthorised)Ee.getUser(Lt.currentUser.login).then((e=>{At.engageState(),ia.getData(e,ua.innerGameMapRender),At.appCallbacks=s;const t=ua.mapRender();At.firstAppearance&&Wt.createWelcomeModal(ia.setData),r.append(t)}));else{At.engageState(),At.appCallbacks=s;const e=ua.mapRender();At.firstAppearance&&Wt.createWelcomeModal(ia.setData),r.append(e)}return r}}.start(s.games,F.applyPage,Ga.renderPage);break;default:n=vt.createLessonsMain(Ga.renderPage)}e.append(n)}static renderStaticPage(){const e=t.getPage(),n=class{static createHeader(e){const t=D.createElement(a.header,[{name:"class",value:"header"}]),n=D.createElement(a.div,[{name:"class",value:"header-wrapper"}]),r=D.createElement(a.div,[{name:"class",value:"menu-wrapper"}]),l=class{static createAppBtn(e,t){const n=D.createElement(a.btn,[{name:"class",value:"app-btn"}]),s=class{static createAppLogo(){const e=D.createElement(a.h1,[{name:"class",value:"app-logo"}]);return e.textContent="EyesUp logo",e}}.createAppLogo();return n.append(s),n.addEventListener("click",(()=>{F.applyPage(e,t)})),n}}.createAppBtn(s.home,e),o=O.createMenu("menu header-menu",e),i=D.createElement(a.div,[{name:"class",value:"controls-wrapper"}]),c=D.createElement(a.div,[{name:"class",value:"theme-lang-wrapper"}]),u=class{static createThemeBtn(){const e=N.createSmallBtn("small-btn small-btn-bg theme-btn","Theme switcher");return e.addEventListener("click",(()=>{$.applyTheme()})),e}}.createThemeBtn(),d=class{static createLangBtn(e){const t=N.createSmallBtn("small-btn small-btn-bg",W.themeSwitcher[I.currentLang]);return t.addEventListener("click",(()=>{z.applyLang(e)})),t}}.createLangBtn(e);let p;const m=class{static createBurgerMenuBtn(e){const t=D.createElement(a.btn,[{name:"class",value:"burger-menu-btn"}]);return t.addEventListener("click",(()=>{j.openModal(_.createModalWrapper(class{static createBurgerMenu(e,t){const n=D.createElement(a.div,[{name:"class",value:"burger-menu"}]),s=q.createCloseBtn("small-btn close-btn",e),r=O.createMenu("menu modal-menu",t);let l;return l=V.checkIfUserAuthorised()?He.createBurgerMenuProfileBtn(e,n,$e.createProfileModal(e,t)):Oe.createBurgerMenuRegistrationBtn(e,n,Ue.createRegistrationModal(e,t)),l.classList.add("burger-menu-user-btn"),n.append(s,r,l),n}}.createBurgerMenu,e))})),t}}.createBurgerMenuBtn(e);return p=V.checkIfUserAuthorised()?He.createHeaderProfileBtn(e):Oe.createHeaderRegistrationBtn(e),p.classList.add("header-user-btn"),c.append(u,d),i.append(c,p,m),r.append(l,o),n.append(r,i),t.append(n),t}}.createHeader(Ga.renderPage);let r;const l=class{static createFooter(){const e=D.createElement(a.footer,[{name:"class",value:"footer"}]),t=Ke.createContentWrapper();return e.append(t),e}}.createFooter();switch(I.currentPage){case s.layout:r=class{static createLayoutMain(e){const t=D.createElement(a.main,[{name:"class",value:"layout"}]),n=J.createMainTitle(W.lessonsTitle[I.currentLang]),r=et.createLayoutBtn(W.lessonsEnLayoutTitle[I.currentLang],e,u.en),l=et.createLayoutBtn(W.lessonsRuLayoutTitle[I.currentLang],e,u.ru),o=class{static createLessonsTest(e){const t=D.createElement(a.section,[{name:"class",value:"layout-test"}]),n=D.createElement(a.h4,[{name:"class",value:"section-title"}]),r=we.createBigBtn(W.lessonsTestBtn[I.currentLang]);return r.addEventListener("click",(()=>{F.applyPage(s.test,e)})),n.textContent=W.lessonsTestTitle[I.currentLang],t.append(n,r),t}}.createLessonsTest(e),i=Ze.createLessonsTest(),c=D.createElement(a.div,[{name:"class",value:"section-btns-wrapper"}]);return n.classList.add("lessons-title"),c.append(r,l),t.append(n,c,o,i),t}}.createLayoutMain(Ga.renderPage);break;case s.games:r=class{static createGamesMain(e){const t=D.createElement(a.main,[{name:"class",value:"games"}]),n=J.createMainTitle(W.gamesTitle[I.currentLang]),r=D.createElement(a.div,[{name:"class",value:"games-section-wrapper"}]);return at.createGameSection(r,"game-one",d.one,s.gameOne,e),at.createGameSection(r,"game-two",d.two,s.gameTwo,e),t.append(n,r),t}}.createGamesMain(Ga.renderPage);break;case s.about:r=class{static createAboutMain(){const e=D.createElement(a.main,[{name:"class",value:"about"}]),t=Me.createSubtitle("subtitle about-subtitle",Wa.greeting[I.currentLang]),n=Fa.createAboutDesc(Wa.project[I.currentLang],Wa.features[I.currentLang],Ge),s=Me.createSubtitle("subtitle about-subtitle",Wa.technologies[I.currentLang]),r=class{static createTechBlock(){const e=D.createElement(a.div,[{name:"class",value:"about-wrapper"}]),t=Ua.createTechDesc(Wa.textFront[I.currentLang],Wa.techFront[I.currentLang]),n=Ua.createTechDesc(Wa.textBack[I.currentLang],Wa.techBack[I.currentLang]);return e.append(t,n),e}}.createTechBlock(),l=Me.createSubtitle("subtitle about-subtitle",Wa.developers[I.currentLang]),o=class{static createDevBlock(){const e=D.createElement(a.div,[{name:"class",value:"about-wrapper"}]),t=Na.createDevDesc(Ve.Irina),n=Na.createDevDesc(Ve.Nikita),s=Na.createDevDesc(Ve.Oxana);return e.append(t,n,s),e}}.createDevBlock(),i=Me.createSubtitle("subtitle about-subtitle",Wa.credits[I.currentLang]),c=class{static createCreditsBlock(){const e=D.createElement(a.div,[{name:"class",value:"about-wrapper"}]),t=Fa.createAboutDesc(Wa.inspyredBy[I.currentLang],Wa.typingClub[I.currentLang],ze),n=class{static createIllustrationsDesc(){const e=D.createElement(a.div,[{name:"class",value:"about-desc"}]),t=D.createElement(a.par,[{name:"class",value:"about-text"}]),n=D.createElement(a.span),s=D.createElement(a.span),r=D.createElement(a.link,[{name:"class",value:"about-link"},{name:"href",value:je},{name:"target",value:"_blank"}]),l=D.createElement(a.link,[{name:"class",value:"about-link"},{name:"href",value:qe},{name:"target",value:"_blank"}]);return n.textContent=Wa.illustrationsBy[I.currentLang],s.textContent=Wa.and[I.currentLang],r.textContent=Wa.illustratorOne[I.currentLang],l.textContent=Wa.illustratorTwo[I.currentLang],t.append(n,r,s,l),e.append(t),e}}.createIllustrationsDesc();return e.append(t,n),e}}.createCreditsBlock();return e.append(t,n,s,r,l,o,i,c),e}}.createAboutMain();break;default:r=class{static createHomeMain(e){const t=D.createElement(a.main,[{name:"class",value:"home"}]),n=class{static createHomePromo(e){const t=D.createElement(a.section,[{name:"class",value:"home-promo"}]),n=D.createElement(a.h2,[{name:"class",value:"promo-title"}]),r=D.createElement(a.par,[{name:"class",value:"promo-text"}]),l=class{static createPromoBtn(e,t){const a=we.createBigBtn(e);return a.addEventListener("click",(()=>{F.applyPage(s.layout,t)})),a}}.createPromoBtn(W.promoBtn[I.currentLang],e),o=D.createElement(a.div,[{name:"class",value:"home-promo-bg"}]),i=D.createElement(a.div,[{name:"class",value:"promo-content-container"}]);return n.textContent=W.promoTitle[I.currentLang],r.textContent=W.promoText[I.currentLang],i.append(n,r,l),t.append(i,o),t}}.createHomePromo(e),r=_e.createHomeSection("lessons",W.homeLessonsTitle[I.currentLang],W.homeLessonsText[I.currentLang]),l=_e.createHomeSection("games",W.homeGamesTitle[I.currentLang],W.homeGamesText[I.currentLang]),o=_e.createHomeSection("progress",W.homeProgressTitle[I.currentLang],W.homeProgressText[I.currentLang]),i=class{static createHomeRegistration(e){const t=D.createElement(a.section,[{name:"class",value:"home-registration"}]),n=J.createMainTitle(W.homeRegistrationTitle[I.currentLang]),s=D.createElement(a.par,[{name:"class",value:"home-text-registration"}]),r=class{static createHomeRegBtn(e){const t=we.createBigBtn(W.homeRegistrationBtn[I.currentLang]);return t.addEventListener("click",(()=>{j.openModal(_.createModalWrapper(Ue.createRegistrationModal,e))})),t}}.createHomeRegBtn(e);return s.textContent=W.homeRegistrationText[I.currentLang],t.append(n,s,r),t}}.createHomeRegistration(e),c=D.createElement(a.div,[{name:"class",value:"home-wrapper"}]);return c.append(n,r,l,o,i),t.append(c),t}}.createHomeMain(Ga.renderPage)}e.append(n,r,l)}static renderPage(){P.updateState(),t.clearPage(),$.swapTheme(),I.currentPage===s.lesson||I.currentPage===s.gameOne||I.currentPage===s.lessons||I.currentPage===s.test?Ga.renderInteractivePage():Ga.renderStaticPage()}}const za=Ga;(class{static start(){za.renderPage()}}).start()})();